{"remainingRequest":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue","mtime":1622622511476},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cG9zdFByZXN0YXJ0LHBvc3RTa3lTdGFydExpdmUscG9zdFNreUVuZExpdmV9IGZyb20gJ0AvYXBpL2xpdmVTZXJ2aWNlLmpzJwppbXBvcnQgQWdvcmFSVEMgZnJvbSAiYWdvcmEtcnRjLXNkay1uZyIKICAgIGV4cG9ydCBkZWZhdWx0IHsKICAgICAgICBkYXRhKCl7CiAgICAgICAgICAgIHJldHVybnsKICAgICAgICAgICAgICAgIC8v55u05pKt5oyJ6ZKuCiAgICAgICAgICAgICAgICBpc0xpdmU6dHJ1ZSwKICAgICAgICAgICAgICAgIC8v5bGP5bmV6auY5bqmCiAgICAgICAgICAgICAgICBjbGllbnRIZWlnaHQ6JycsCiAgICAgICAgICAgICAgICAvL+a0u+WKqElECiAgICAgICAgICAgICAgICBldmVudElkOicnLAogICAgICAgICAgICAgICAgLy/lo7DnvZEg6aG555uuSUQKICAgICAgICAgICAgICAgIGFwcGlkOiAiIiwKICAgICAgICAgICAgICAgIC8v55u05pKt5oi/6Ze0CiAgICAgICAgICAgICAgICBjaGFubmVsOiAiIiwgLy93ZWJJZAogICAgICAgICAgICAgICAgLy/miL/pl7TlhoUg55So5oi3SUQKICAgICAgICAgICAgICAgIHVpZDogMCwKICAgICAgICAgICAgICAgIC8v5pys5qyh55u05pKtICBJRAogICAgICAgICAgICAgICAgbGhpZDogMCwKICAgICAgICAgICAgICAgIC8v5aOw572RdG9rZW4KICAgICAgICAgICAgICAgIHRva2VuOiAiIiwKICAgICAgICAgICAgICAgIC8v6KeS6ImyIO+8iOS4u+aSreWSjOinguS8l++8iQogICAgICAgICAgICAgICAgcm9sZTogImhvc3QiLAogICAgICAgICAgICAgICAgLy/lo7DnvZEgIOebtOaSreWuouaIt+errwogICAgICAgICAgICAgICAgY2xpZW50IDpudWxsLAogICAgICAgICAgICAgICAgLy/lvZPliY0g6L2o6YGTCiAgICAgICAgICAgICAgICBsb2NhbFRyYWNrcyA6ewogICAgICAgICAgICAgICAgICAgIHZpZGVvVHJhY2s6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgYXVkaW9UcmFjazogbnVsbAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIC8v6bqm5YWL6aOOCiAgICAgICAgICAgICAgICBtaWNzIDogW10sIC8vIGFsbCBtaWNyb3Bob25lcyBkZXZpY2VzIHlvdSBjYW4gdXNlCiAgICAgICAgICAgICAgICAvL+aRhOWDj+WktAogICAgICAgICAgICAgICAgY2FtcyA6IFtdLCAvLyBhbGwgY2FtZXJhcyBkZXZpY2VzIHlvdSBjYW4gdXNlCiAgICAgICAgICAgICAgICAvLyDlvZPliY3puqblhYvpo47lkozmkYTlg4/lpLQKICAgICAgICAgICAgICAgIGN1cnJlbnRNaWM6bnVsbCwgLy8gdGhlIG1pY3JvcGhvbmUgeW91IGFyZSB1c2luZwogICAgICAgICAgICAgICAgY3VycmVudENhbTpudWxsLCAvLyB0aGUgY2FtZXJhIHlvdSBhcmUgdXNpbmcKICAgICAgICAgICAgICAgIC8v55u05pKt5YiG6L6o546HCiAgICAgICAgICAgICAgICB2aWRlb1Byb2ZpbGVzIDogWwogICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICI0ODBwXzEiLCBkZXRhaWw6ICI2NDDDlzQ4MCwgMTVmcHMsIDUwMEticHMiLCB2YWx1ZTogIjQ4MHBfMSIgfSwKICAgICAgICAgICAgICAgICAgICB7IGxhYmVsOiAiNDgwcF8yIiwgZGV0YWlsOiAiNjQww5c0ODAsIDMwZnBzLCAxMDAwS2JwcyIsIHZhbHVlOiAiNDgwcF8yIiB9LAogICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICI3MjBwXzEiLCBkZXRhaWw6ICIxMjgww5c3MjAsIDE1ZnBzLCAxMTMwS2JwcyIsIHZhbHVlOiAiNzIwcF8xIiB9LAogICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICI3MjBwXzIiLCBkZXRhaWw6ICIxMjgww5c3MjAsIDMwZnBzLCAyMDAwS2JwcyIsIHZhbHVlOiAiNzIwcF8yIiB9LAogICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICIxMDgwcF8xIiwgZGV0YWlsOiAiMTkyMMOXMTA4MCwgMTVmcHMsIDIwODBLYnBzIiwgdmFsdWU6ICIxMDgwcF8xIiB9LAogICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICIxMDgwcF8yIiwgZGV0YWlsOiAiMTkyMMOXMTA4MCwgMzBmcHMsIDMwMDBLYnBzIiwgdmFsdWU6ICIxMDgwcF8yIiB9LAogICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICIyMDDDlzY0MCIsIGRldGFpbDogIjIwMMOXNjQwLCAzMGZwcyIsIHZhbHVlOiB7IHdpZHRoOiAyMDAsIGhlaWdodDogNjQwLCBmcmFtZVJhdGU6IDMwIH0gfSAvLyBjdXN0b20gdmlkZW8gcHJvZmlsZQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIC8vIOW9k+WJjeWIhui+qOeOhwogICAgICAgICAgICAgICAgY3VyVmlkZW9Qcm9maWxlOm51bGwKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczp7CiAgICAgICAgICAgIC8v5YeG5aSH55u05pKtCiAgICAgICAgICAgIGFzeW5jIGxpdmVQcmVzdGFydCgpewogICAgICAgICAgICAgICAgYXdhaXQgcG9zdFByZXN0YXJ0KHRoaXMuZXZlbnRJZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgICAgICBpZihyZXMuZGF0YS5yc3BDb2RlID09IDEpewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBpZCA9IGRhdGEuYXBwSWQKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFubmVsID0gZGF0YS5jaGFubmVsCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWlkID0gZGF0YS51aWQKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saGlkID0gZGF0YS5oaXN0b3J5SWQKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2tlbiA9IGRhdGEudG9rZW4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnN0YXJ0TGl2ZSgpOwogICAgICAgICAgICAgICAgICAgIC8v5byA5aeL55u05pKtCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5za3lTdGFydExpdmUoKTsKICAgICAgICAgICAgICAgICAgICAvL3ZvbHVtZUFuaW1hdGlvbiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzZXRWb2x1bWVXYXZlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTGl2ZSA9IGZhbHNlCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc3RhcnQgbGl2ZSBmYWlsZWQhJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5sZWF2ZUxpdmUoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3JDb2RlID0gZXJyb3IuY29kZTsKICAgICAgICAgICAgICAgICAgICB2YXIgZXJyTXNnID0gIuW8gOWQr+ebtOaSreWksei0pSwiOwogICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckNvZGUgPT09ICdERVZJQ0VfTk9UX0ZPVU5EJykgewogICAgICAgICAgICAgICAgICAgICAgICBlcnJNc2cgKz0gIuacquaJvuWIsOaRhOWDj+WktOaIlum6puWFi+mjjuiuvuWkhyEiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlcnJNc2cgKz0gIlxu6K+m57uG6ZSZ6K+v5L+h5oGvXG4iICsgZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoZXJyTXNnKTsKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8kKCIjYnRuLXN0b3AtbGl2ZSIpLmF0dHIoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIC8vJCgiI2VuYWJsZS1iZWF1dHkiKS5hdHRyKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAvLyQoIiNkaXNhYmxlLWJlYXV0eSIpLmF0dHIoImRpc2FibGVkIiwgdHJ1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8v5aOw572R5byA5aeL55u05pKtCiAgICAgICAgICAgIGFzeW5jIHN0YXJ0TGl2ZSgpIHsKICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBBZ29yYSBjbGllbnQKICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50LnNldENsaWVudFJvbGUodGhpcy5yb2xlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXBwaWQsIHRoaXMuY2hhbm5lbCwgdGhpcy50b2tlbix0aGlzLnVpZCkKICAgICAgICAgICAgICAgIC8vIGpvaW4gdGhlIGNoYW5uZWwKICAgICAgICAgICAgICAgIHRoaXMudWlkID0gYXdhaXQgdGhpcy5jbGllbnQuam9pbih0aGlzLmFwcGlkLCB0aGlzLmNoYW5uZWwsIHRoaXMudG9rZW4gfHwgbnVsbCwgdGhpcy51aWQpOwoKICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBsb2NhbCBhdWRpbyBhbmQgdmlkZW8gdHJhY2tzCiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2sgPSBhd2FpdCBBZ29yYVJUQy5jcmVhdGVNaWNyb3Bob25lQXVkaW9UcmFjaygpOwogICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrID0gYXdhaXQgQWdvcmFSVEMuY3JlYXRlQ2FtZXJhVmlkZW9UcmFjayh7IGVuY29kZXJDb25maWc6IHRoaXMuY3VyVmlkZW9Qcm9maWxlLnZhbHVlIH0pOwogICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLnNldFZvbHVtZSgyMDApOwogICAgICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suZ2V0Vm9sdW1lTGV2ZWwoKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJsb2NhbCBzdHJlYW0gYXVkaW8gbGV2ZWwiLCBsZXZlbCk7CiAgICAgICAgICAgICAgICAvLyBwbGF5IGxvY2FsIHZpZGVvIHRyYWNrCiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2sucGxheSgibG9jYWwtcGxheWVyIik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vJCgiI2xvY2FsLXBsYXllci1uYW1lIikudGV4dChgbG9jYWxUcmFjaygke29wdGlvbnMudWlkfSlgKTsKICAgICAgICAgICAgICAgIC8vIHB1Ymxpc2ggbG9jYWwgdHJhY2tzIHRvIGNoYW5uZWwKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnB1Ymxpc2goW3RoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjaywgdGhpcy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrXSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicHVibGlzaCBzdWNjZXNzIik7CiAgICAgICAgICAgICAgICAvLyBjbGllbnQub24oInVzZXItbGVmdCIsIGhhbmRsZVVzZXJMZWZ0KTsKICAgICAgICAgICAgICAgIC8vIGNsaWVudC5vbigiY29ubmVjdGlvbi1zdGF0ZS1jaGFuZ2UiLCBoYW5kbGVTdGF0ZUNoYW5nZSk7CiAgICAgICAgICAgICAgICAvLyBjbGllbnQub24oInRva2VuLXByaXZpbGVnZS13aWxsLWV4cGlyZSIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJvblRva2VuUHJpdmlsZWdlV2lsbEV4cGlyZSIpOwogICAgICAgICAgICAgICAgLy8gICAgIC8v6L+b6KGM6YeN5paw55Sz6K+3IFRva2VuIOaTjeS9nOWQjgogICAgICAgICAgICAgICAgLy8gICAgIC8vY2xpZW50LnJlbmV3VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvLyBjbGllbnQub24oInRva2VuLXByaXZpbGVnZS1kaWQtZXhwaXJlIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coIm9uVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmUiKTsKICAgICAgICAgICAgICAgIC8vICAgICAkKCIjdmVyaWZpY2F0aW9uLWRpYWxvZy0zIikubW9kYWwoInNob3ciKTsKICAgICAgICAgICAgICAgIC8vICAgICBsZWF2ZUxpdmUoKTsKICAgICAgICAgICAgICAgIC8vICAgICAvL+i/m+ihjOmHjeaWsOeUs+ivtyBUb2tlbiDmk43kvZzlkI4KICAgICAgICAgICAgICAgIC8vICAgICAvL2NsaWVudC5yZW5ld1Rva2VuKHRva2VuKTsKICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgICAgLy9pbml0U3RhdHMoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy/mtLvliqjmmJ/nqbrlvIDlp4vnm7Tmkq0KICAgICAgICAgICAgc2t5U3RhcnRMaXZlKCl7CiAgICAgICAgICAgICAgICBwb3N0U2t5U3RhcnRMaXZlKHRoaXMuZXZlbnRJZCx0aGlzLmxoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCgogICAgICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLnJzcENvZGUgPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcywn5byA5aeL55u05pKtJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAogICAgICAKICAgICAgICAgICAgLy/lo7DnvZHnu5PmnZ/nm7Tmkq0KICAgICAgICAgICAgYXN5bmMgbGVhdmVMaXZlKCl7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2sgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjaykgewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjay5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnVucHVibGlzaCgpOwogICAgICAgICAgICAgICAgLy8gbGVhdmUgdGhlIGNoYW5uZWwKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LmxlYXZlKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8v5Yid5aeL5YyW55u05pKtIOWIhui+qOeOhyAgIAogICAgICAgICAgICBpbml0VmlkZW9Qcm9maWxlcygpIHsKICAgICAgICAgICAgICAgIHRoaXMuY3VyVmlkZW9Qcm9maWxlID0gdGhpcy52aWRlb1Byb2ZpbGVzWzNdOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+a0u+WKqOaYn+epuue7k+adn+ebtOaSrQogICAgICAgICAgICBlbmRTa3lMaXZlKCl7CiAgICAgICAgICAgICAgICB0aGlzLmxlYXZlTGl2ZSgpCiAgICAgICAgICAgICAgICBwb3N0U2t5RW5kTGl2ZSh0aGlzLmV2ZW50SWQsdGhpcy5saGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLnJzcENvZGUgPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcywn57uT5p2f55u05pKtJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtb3VudGVkKCl7CiAgICAgICAgICAgdGhpcy5jbGllbnRIZWlnaHQgPSBgJHtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0fWA7CiAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzCiAgICAgICAgICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoYXQuY2xpZW50SGVpZ2h0ID0gIGAke2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHR9YDsKICAgICAgICAgICAgICAgIGlmKHRoYXQuJHJlZnMubGl2ZSl7CiAgICAgICAgICAgICAgICAgICAgdGhhdC4kcmVmcy5saXZlLnN0eWxlLm1pbkhlaWdodCA9IHRoYXQuY2xpZW50SGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY3JlYXRlZCgpewogICAgICAgICAgICB0aGlzLmV2ZW50SWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucGF0aE1hdGNoCgogICAgICAgICAgICB2YXIgYnJvd2VyU3VwcG9ydCA9IEFnb3JhUlRDLmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzKCk7CiAgICAgICAgICAgIGlmIChicm93ZXJTdXBwb3J0KSB7CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7IG1vZGU6ICJsaXZlIiwgY29kZWM6ICJoMjY0IiB9KTsKICAgICAgICAgICAgICAgIC8vc2NyZWVuU2hhcmVDbGllbnQgPSBBZ29yYVJUQy5jcmVhdGVDbGllbnQoeyBtb2RlOiAibGl2ZSIsIGNvZGVjOiAidnA4IiB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJUaGUgQnJvd2VyIGlzIG5vdCBzdXBwb3J0IGxpdmUhIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pbml0VmlkZW9Qcm9maWxlcygpOwogICAgICAgIH0sCiAgICAgICAgd2F0Y2g6ewogICAgICAgICAgICBjbGllbnRIZWlnaHQoY2xpZW50SGVpZ2h0KXsKICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5saXZlLnN0eWxlLm1pbkhlaWdodCA9IGNsaWVudEhlaWdodCArICdweCc7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cg=="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live.vue","sourceRoot":"src/views/live","sourcesContent":["<template>\n    <div>\n        <div ref=\"live\" class=\"live\">\n            <div id=\"local-player\" class=\"player-box\">\n                <div class=\"player-btn\" @click=\"livePrestart\" v-if=\"isLive\">\n                    <img src=\"@/assets/images/video-start.png\" class=\"video\" alt=\"\">\n                    <p class=\"text\">开始直播</p>\n                </div>\n                <div class=\"endBtn\" v-if=\"!isLive\" @click=\"endSkyLive\">直播中，结束直播</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {postPrestart,postSkyStartLive,postSkyEndLive} from '@/api/liveService.js'\nimport AgoraRTC from \"agora-rtc-sdk-ng\"\n    export default {\n        data(){\n            return{\n                //直播按钮\n                isLive:true,\n                //屏幕高度\n                clientHeight:'',\n                //活动ID\n                eventId:'',\n                //声网 项目ID\n                appid: \"\",\n                //直播房间\n                channel: \"\", //webId\n                //房间内 用户ID\n                uid: 0,\n                //本次直播  ID\n                lhid: 0,\n                //声网token\n                token: \"\",\n                //角色 （主播和观众）\n                role: \"host\",\n                //声网  直播客户端\n                client :null,\n                //当前 轨道\n                localTracks :{\n                    videoTrack: null,\n                    audioTrack: null\n                },\n                //麦克风\n                mics : [], // all microphones devices you can use\n                //摄像头\n                cams : [], // all cameras devices you can use\n                // 当前麦克风和摄像头\n                currentMic:null, // the microphone you are using\n                currentCam:null, // the camera you are using\n                //直播分辨率\n                videoProfiles : [\n                    { label: \"480p_1\", detail: \"640×480, 15fps, 500Kbps\", value: \"480p_1\" },\n                    { label: \"480p_2\", detail: \"640×480, 30fps, 1000Kbps\", value: \"480p_2\" },\n                    { label: \"720p_1\", detail: \"1280×720, 15fps, 1130Kbps\", value: \"720p_1\" },\n                    { label: \"720p_2\", detail: \"1280×720, 30fps, 2000Kbps\", value: \"720p_2\" },\n                    { label: \"1080p_1\", detail: \"1920×1080, 15fps, 2080Kbps\", value: \"1080p_1\" },\n                    { label: \"1080p_2\", detail: \"1920×1080, 30fps, 3000Kbps\", value: \"1080p_2\" },\n                    { label: \"200×640\", detail: \"200×640, 30fps\", value: { width: 200, height: 640, frameRate: 30 } } // custom video profile\n                ],\n                // 当前分辨率\n                curVideoProfile:null\n            }\n        },\n        methods:{\n            //准备直播\n            async livePrestart(){\n                await postPrestart(this.eventId).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        let data = res.data.data\n                        this.appid = data.appId\n                        this.channel = data.channel\n                        this.uid = data.uid\n                        this.lhid = data.historyId\n                        this.token = data.token\n                    }\n                })\n                try {\n                    await this.startLive();\n                    //开始直播\n                    await this.skyStartLive();\n                    //volumeAnimation = requestAnimationFrame(setVolumeWave);\n                    this.isLive = false\n                } \n                catch (error) {\n                    console.error('start live failed!');\n                    console.error(error);\n                    // this.leaveLive();\n                    var errorCode = error.code;\n                    var errMsg = \"开启直播失败,\";\n                    if (errorCode === 'DEVICE_NOT_FOUND') {\n                        errMsg += \"未找到摄像头或麦克风设备!\";\n                    }\n                    errMsg += \"\\n详细错误信息\\n\" + error;\n                    alert(errMsg);\n                } finally {\n                    \n                    //$(\"#btn-stop-live\").attr(\"disabled\", false);\n                    //$(\"#enable-beauty\").attr(\"disabled\", false);\n                    //$(\"#disable-beauty\").attr(\"disabled\", true);\n                }\n            },\n            //声网开始直播\n            async startLive() {\n                // create Agora client\n                this.client.setClientRole(this.role);\n                console.log(this.appid, this.channel, this.token,this.uid)\n                // join the channel\n                this.uid = await this.client.join(this.appid, this.channel, this.token || null, this.uid);\n\n                // create local audio and video tracks\n                this.localTracks.audioTrack = await AgoraRTC.createMicrophoneAudioTrack();\n                this.localTracks.videoTrack = await AgoraRTC.createCameraVideoTrack({ encoderConfig: this.curVideoProfile.value });\n                this.localTracks.audioTrack.setVolume(200);\n                const level = this.localTracks.audioTrack.getVolumeLevel();\n                console.log(\"local stream audio level\", level);\n                // play local video track\n                this.localTracks.videoTrack.play(\"local-player\");\n                \n                //$(\"#local-player-name\").text(`localTrack(${options.uid})`);\n                // publish local tracks to channel\n                await this.client.publish([this.localTracks.audioTrack, this.localTracks.videoTrack]);\n                console.log(\"publish success\");\n                // client.on(\"user-left\", handleUserLeft);\n                // client.on(\"connection-state-change\", handleStateChange);\n                // client.on(\"token-privilege-will-expire\", function() {\n                //     console.log(\"onTokenPrivilegeWillExpire\");\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                // client.on(\"token-privilege-did-expire\", function() {\n                //     console.log(\"onTokenPrivilegeDidExpire\");\n                //     $(\"#verification-dialog-3\").modal(\"show\");\n                //     leaveLive();\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                //initStats();\n            },\n            //活动星空开始直播\n            skyStartLive(){\n                postSkyStartLive(this.eventId,this.lhid).then(res => {\n                    console.log(res)\n\n                    if(res.data.rspCode == 1){\n                        console.log(res,'开始直播')\n                    }\n                })\n            },\n      \n            //声网结束直播\n            async leaveLive(){\n                if (this.localTracks.audioTrack) {\n                    this.localTracks.audioTrack.stop();\n                    this.localTracks.audioTrack.close();\n                    this.localTracks.audioTrack = undefined;\n                }\n\n                if (this.localTracks.videoTrack) {\n                    this.localTracks.videoTrack.stop();\n                    this.localTracks.videoTrack.close();\n                    this.localTracks.videoTrack = undefined;\n                }\n\n                await this.client.unpublish();\n                // leave the channel\n                await this.client.leave();\n            },\n            //初始化直播 分辨率   \n            initVideoProfiles() {\n                this.curVideoProfile = this.videoProfiles[3];\n            },\n            //活动星空结束直播\n            endSkyLive(){\n                this.leaveLive()\n                postSkyEndLive(this.eventId,this.lhid).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        console.log(res,'结束直播')\n                    }\n                })\n            }\n        },\n        mounted(){\n           this.clientHeight = `${document.documentElement.clientHeight}`;\n           let that = this\n           window.onresize = function(){\n                that.clientHeight =  `${document.documentElement.clientHeight}`;\n                if(that.$refs.live){\n                    that.$refs.live.style.minHeight = that.clientHeight + 'px';\n                }\n            }\n        },\n        created(){\n            this.eventId = this.$route.params.pathMatch\n\n            var browerSupport = AgoraRTC.checkSystemRequirements();\n            if (browerSupport) {\n                this.client = AgoraRTC.createClient({ mode: \"live\", codec: \"h264\" });\n                //screenShareClient = AgoraRTC.createClient({ mode: \"live\", codec: \"vp8\" });\n            } else {\n                alert(\"The Brower is not support live!\");\n                return;\n            }\n            this.initVideoProfiles();\n        },\n        watch:{\n            clientHeight(clientHeight){\n               this.$refs.live.style.minHeight = clientHeight + 'px';\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .live{\n        padding: 120px 0 150px;\n        box-sizing: border-box;\n        background: #0F5F54;\n    }\n    .player-box{\n        width: 90%;\n        height: 600px;\n        margin: 0 auto;\n        position: relative;\n        .player-btn{\n            display: inline-block;\n            position: absolute;\n            margin: auto;\n            left: 50%;\n            transform: translate3d(-50%,-50%,0);\n            cursor: pointer;\n            top: 50%;\n            .video{\n                width: 115px;\n                margin:0 auto 40px;\n                display: block;\n            }\n            .text{\n                background: #027AFF;\n                border-radius: 6px;\n                border: 1px solid #979797;\n                color: #fff;\n                line-height: 42px;\n                display: inline-block;\n                padding: 0 30px;\n            }\n        }\n        .endBtn{\n            display: inline-block;\n            position: absolute;\n            left: 50%;\n            transform: translateX(-50%);\n            bottom: 18px;\n            padding: 0 30px;\n            color: #fff;\n            cursor: pointer;\n            line-height: 44px;\n            background: #FF5755;\n            border-radius: 6px;\n            border: 1px solid #979797;\n        }\n    }\n</style>"]}]}