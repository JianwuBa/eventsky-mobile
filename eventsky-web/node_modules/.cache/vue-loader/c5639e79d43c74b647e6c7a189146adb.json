{"remainingRequest":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue","mtime":1623053817156},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cG9zdFByZXN0YXJ0LHBvc3RTa3lTdGFydExpdmUscG9zdFNreUVuZExpdmV9IGZyb20gJ0AvYXBpL2xpdmVTZXJ2aWNlLmpzJwppbXBvcnQgQWdvcmFSVEMgZnJvbSAiYWdvcmEtcnRjLXNkay1uZyIKCmltcG9ydCB7TWl4SW5zfSBmcm9tICJAL2FwaS9taXhpbnMuanMiCiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbWl4aW5zOltNaXhJbnNdLAogICAgICAgIGRhdGEoKXsKICAgICAgICAgICAgcmV0dXJuewogICAgICAgICAgICAgICAgLy/nm7Tmkq3mjInpkq4KICAgICAgICAgICAgICAgIGlzTGl2ZTp0cnVlLAogICAgICAgICAgICAgICAgLy/lsY/luZXpq5jluqYKICAgICAgICAgICAgICAgIGNsaWVudEhlaWdodDonJywKICAgICAgICAgICAgICAgIC8v5rS75YqoSUQKICAgICAgICAgICAgICAgIGV2ZW50SWQ6JycsCiAgICAgICAgICAgICAgICAvL+WjsOe9kSDpobnnm65JRAogICAgICAgICAgICAgICAgYXBwaWQ6ICIiLAogICAgICAgICAgICAgICAgLy/nm7Tmkq3miL/pl7QKICAgICAgICAgICAgICAgIGNoYW5uZWw6ICIiLCAvL3dlYklkCiAgICAgICAgICAgICAgICAvL+aIv+mXtOWGhSDnlKjmiLdJRAogICAgICAgICAgICAgICAgdWlkOiAwLAogICAgICAgICAgICAgICAgLy/mnKzmrKHnm7Tmkq0gIElECiAgICAgICAgICAgICAgICBsaGlkOiAwLAogICAgICAgICAgICAgICAgLy/lo7DnvZF0b2tlbgogICAgICAgICAgICAgICAgdG9rZW46ICIiLAogICAgICAgICAgICAgICAgLy/op5LoibIg77yI5Li75pKt5ZKM6KeC5LyX77yJCiAgICAgICAgICAgICAgICByb2xlOiAiaG9zdCIsCiAgICAgICAgICAgICAgICAvL+WjsOe9kSAg55u05pKt5a6i5oi356uvCiAgICAgICAgICAgICAgICBjbGllbnQgOm51bGwsCiAgICAgICAgICAgICAgICAvL+W9k+WJjSDovajpgZMKICAgICAgICAgICAgICAgIGxvY2FsVHJhY2tzIDp7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9UcmFjazogbnVsbCwKICAgICAgICAgICAgICAgICAgICBhdWRpb1RyYWNrOiBudWxsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgLy/puqblhYvpo44KICAgICAgICAgICAgICAgIG1pY3MgOiBbXSwgLy8gYWxsIG1pY3JvcGhvbmVzIGRldmljZXMgeW91IGNhbiB1c2UKICAgICAgICAgICAgICAgIC8v5pGE5YOP5aS0CiAgICAgICAgICAgICAgICBjYW1zIDogW10sIC8vIGFsbCBjYW1lcmFzIGRldmljZXMgeW91IGNhbiB1c2UKICAgICAgICAgICAgICAgIC8vIOW9k+WJjem6puWFi+mjjuWSjOaRhOWDj+WktAogICAgICAgICAgICAgICAgY3VycmVudE1pYzpudWxsLCAvLyB0aGUgbWljcm9waG9uZSB5b3UgYXJlIHVzaW5nCiAgICAgICAgICAgICAgICBjdXJyZW50Q2FtOm51bGwsIC8vIHRoZSBjYW1lcmEgeW91IGFyZSB1c2luZwogICAgICAgICAgICAgICAgLy/nm7Tmkq3liIbovqjnjocKICAgICAgICAgICAgICAgIHZpZGVvUHJvZmlsZXMgOiBbCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjQ4MHBfMSIsIGRldGFpbDogIjY0MMOXNDgwLCAxNWZwcywgNTAwS2JwcyIsIHZhbHVlOiAiNDgwcF8xIiB9LAogICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICI0ODBwXzIiLCBkZXRhaWw6ICI2NDDDlzQ4MCwgMzBmcHMsIDEwMDBLYnBzIiwgdmFsdWU6ICI0ODBwXzIiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjcyMHBfMSIsIGRldGFpbDogIjEyODDDlzcyMCwgMTVmcHMsIDExMzBLYnBzIiwgdmFsdWU6ICI3MjBwXzEiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjcyMHBfMiIsIGRldGFpbDogIjEyODDDlzcyMCwgMzBmcHMsIDIwMDBLYnBzIiwgdmFsdWU6ICI3MjBwXzIiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjEwODBwXzEiLCBkZXRhaWw6ICIxOTIww5cxMDgwLCAxNWZwcywgMjA4MEticHMiLCB2YWx1ZTogIjEwODBwXzEiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjEwODBwXzIiLCBkZXRhaWw6ICIxOTIww5cxMDgwLCAzMGZwcywgMzAwMEticHMiLCB2YWx1ZTogIjEwODBwXzIiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjIwMMOXNjQwIiwgZGV0YWlsOiAiMjAww5c2NDAsIDMwZnBzIiwgdmFsdWU6IHsgd2lkdGg6IDIwMCwgaGVpZ2h0OiA2NDAsIGZyYW1lUmF0ZTogMzAgfSB9IC8vIGN1c3RvbSB2aWRlbyBwcm9maWxlCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgLy8g5b2T5YmN5YiG6L6o546HCiAgICAgICAgICAgICAgICBjdXJWaWRlb1Byb2ZpbGU6bnVsbAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOnsKICAgICAgICAgICAgLy/lh4blpIfnm7Tmkq0KICAgICAgICAgICAgYXN5bmMgbGl2ZVByZXN0YXJ0KCl7CiAgICAgICAgICAgICAgICBhd2FpdCBwb3N0UHJlc3RhcnQodGhpcy5ldmVudElkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhLnJzcENvZGUgPT0gMSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGlkID0gZGF0YS5hcHBJZAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5uZWwgPSBkYXRhLmNoYW5uZWwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51aWQgPSBkYXRhLnVpZAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxoaWQgPSBkYXRhLmhpc3RvcnlJZAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRva2VuID0gZGF0YS50b2tlbgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpdmVzKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgYXN5bmMgbGl2ZXMoKXsKICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RhcnRMaXZlKCkKICAgICAgICAgICAgICAgICAgICAvL+W8gOWni+ebtOaSrQogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2t5U3RhcnRMaXZlKCkKICAgICAgICAgICAgICAgICAgICAvL3ZvbHVtZUFuaW1hdGlvbiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzZXRWb2x1bWVXYXZlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzTGl2ZSA9IGZhbHNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzdGFydCBsaXZlIGZhaWxlZCEnKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmxlYXZlTGl2ZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBlcnJvckNvZGUgPSBlcnJvci5jb2RlOwogICAgICAgICAgICAgICAgICAgIHZhciBlcnJNc2cgPSAi5byA5ZCv55u05pKt5aSx6LSlLCI7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ0RFVklDRV9OT1RfRk9VTkQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVyck1zZyArPSAi5pyq5om+5Yiw5pGE5YOP5aS05oiW6bqm5YWL6aOO6K6+5aSHISI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVyck1zZyArPSAiXG7or6bnu4bplJnor6/kv6Hmga9cbiIgKyBlcnJvcjsKICAgICAgICAgICAgICAgICAgICBhbGVydChlcnJNc2cpOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAvLyQoIiNidG4tc3RvcC1saXZlIikuYXR0cigiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgLy8kKCIjZW5hYmxlLWJlYXV0eSIpLmF0dHIoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIC8vJCgiI2Rpc2FibGUtYmVhdXR5IikuYXR0cigiZGlzYWJsZWQiLCB0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy/lo7DnvZHlvIDlp4vnm7Tmkq0KICAgICAgICAgICAgYXN5bmMgc3RhcnRMaXZlKCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInN0YXJ0bGl2ZSIpCiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgQWdvcmEgY2xpZW50CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5zZXRDbGllbnRSb2xlKHRoaXMucm9sZSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFwcGlkLCB0aGlzLmNoYW5uZWwsIHRoaXMudG9rZW4sdGhpcy51aWQpCiAgICAgICAgICAgICAgICAvLyBqb2luIHRoZSBjaGFubmVsCiAgICAgICAgICAgICAgICB0aGlzLnVpZCA9IGF3YWl0IHRoaXMuY2xpZW50LmpvaW4odGhpcy5hcHBpZCwgdGhpcy5jaGFubmVsLCB0aGlzLnRva2VuIHx8IG51bGwsIHRoaXMudWlkKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlbmQtam9pbjoiK3RoaXMudWlkKQogICAgICAgICAgICAgICAgLy8gY3JlYXRlIGxvY2FsIGF1ZGlvIGFuZCB2aWRlbyB0cmFja3MKICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjayA9IGF3YWl0IEFnb3JhUlRDLmNyZWF0ZU1pY3JvcGhvbmVBdWRpb1RyYWNrKCk7CiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2sgPSBhd2FpdCBBZ29yYVJUQy5jcmVhdGVDYW1lcmFWaWRlb1RyYWNrKHsgZW5jb2RlckNvbmZpZzogdGhpcy5jdXJWaWRlb1Byb2ZpbGUudmFsdWUgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suc2V0Vm9sdW1lKDIwMCk7CiAgICAgICAgICAgICAgICBjb25zdCBsZXZlbCA9IHRoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjay5nZXRWb2x1bWVMZXZlbCgpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImxvY2FsIHN0cmVhbSBhdWRpbyBsZXZlbCIsIGxldmVsKTsKICAgICAgICAgICAgICAgIC8vIC8vIHBsYXkgbG9jYWwgdmlkZW8gdHJhY2sKICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjay5wbGF5KCJsb2NhbC1wbGF5ZXIiKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gLy8kKCIjbG9jYWwtcGxheWVyLW5hbWUiKS50ZXh0KGBsb2NhbFRyYWNrKCR7b3B0aW9ucy51aWR9KWApOwogICAgICAgICAgICAgICAgLy8gLy8gcHVibGlzaCBsb2NhbCB0cmFja3MgdG8gY2hhbm5lbAogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQucHVibGlzaChbdGhpcy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLCB0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2tdKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJwdWJsaXNoIHN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIC8vIGNsaWVudC5vbigidXNlci1sZWZ0IiwgaGFuZGxlVXNlckxlZnQpOwogICAgICAgICAgICAgICAgLy8gY2xpZW50Lm9uKCJjb25uZWN0aW9uLXN0YXRlLWNoYW5nZSIsIGhhbmRsZVN0YXRlQ2hhbmdlKTsKICAgICAgICAgICAgICAgIC8vIGNsaWVudC5vbigidG9rZW4tcHJpdmlsZWdlLXdpbGwtZXhwaXJlIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coIm9uVG9rZW5Qcml2aWxlZ2VXaWxsRXhwaXJlIik7CiAgICAgICAgICAgICAgICAvLyAgICAgLy/ov5vooYzph43mlrDnlLPor7cgVG9rZW4g5pON5L2c5ZCOCiAgICAgICAgICAgICAgICAvLyAgICAgLy9jbGllbnQucmVuZXdUb2tlbih0b2tlbik7CiAgICAgICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgICAgIC8vIGNsaWVudC5vbigidG9rZW4tcHJpdmlsZWdlLWRpZC1leHBpcmUiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygib25Ub2tlblByaXZpbGVnZURpZEV4cGlyZSIpOwogICAgICAgICAgICAgICAgLy8gICAgICQoIiN2ZXJpZmljYXRpb24tZGlhbG9nLTMiKS5tb2RhbCgic2hvdyIpOwogICAgICAgICAgICAgICAgLy8gICAgIGxlYXZlTGl2ZSgpOwogICAgICAgICAgICAgICAgLy8gICAgIC8v6L+b6KGM6YeN5paw55Sz6K+3IFRva2VuIOaTjeS9nOWQjgogICAgICAgICAgICAgICAgLy8gICAgIC8vY2xpZW50LnJlbmV3VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvL2luaXRTdGF0cygpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+a0u+WKqOaYn+epuuW8gOWni+ebtOaSrQogICAgICAgICAgICAgc2t5U3RhcnRMaXZlKCl7CiAgICAgICAgICAgICAgICAgcG9zdFNreVN0YXJ0TGl2ZSh0aGlzLmV2ZW50SWQsdGhpcy5saGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKQoKICAgICAgICAgICAgICAgICAgICBpZihyZXMuZGF0YS5yc3BDb2RlID09IDEpewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMsJ+W8gOWni+ebtOaSrScpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKICAgICAgCiAgICAgICAgICAgIC8v5aOw572R57uT5p2f55u05pKtCiAgICAgICAgICAgIGFzeW5jIGxlYXZlTGl2ZSgpewogICAgICAgICAgICAgICAgaWYgKHRoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjaykgewogICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjay5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2spIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2suc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjay5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjayA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC51bnB1Ymxpc2goKTsKICAgICAgICAgICAgICAgIC8vIGxlYXZlIHRoZSBjaGFubmVsCiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5sZWF2ZSgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvL+WIneWni+WMluebtOaSrSDliIbovqjnjocgICAKICAgICAgICAgICAgaW5pdFZpZGVvUHJvZmlsZXMoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmN1clZpZGVvUHJvZmlsZSA9IHRoaXMudmlkZW9Qcm9maWxlc1szXTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy/mtLvliqjmmJ/nqbrnu5PmnZ/nm7Tmkq0KICAgICAgICAgICAgZW5kU2t5TGl2ZSgpewogICAgICAgICAgICAgICAgdGhpcy5sZWF2ZUxpdmUoKQogICAgICAgICAgICAgICAgcG9zdFNreUVuZExpdmUodGhpcy5ldmVudElkLHRoaXMubGhpZCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICAgICAgICAgICAgICBpZihyZXMuZGF0YS5yc3BDb2RlID09IDEpewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMsJ+e7k+adn+ebtOaSrScpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY3JlYXRlZCgpewogICAgICAgICAgICB0aGlzLmV2ZW50SWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucGF0aE1hdGNoCgogICAgICAgICAgICB2YXIgYnJvd2VyU3VwcG9ydCA9IEFnb3JhUlRDLmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzKCk7CiAgICAgICAgICAgIGlmIChicm93ZXJTdXBwb3J0KSB7CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7IG1vZGU6ICJsaXZlIiwgY29kZWM6ICJoMjY0IiB9KTsKICAgICAgICAgICAgICAgIC8vc2NyZWVuU2hhcmVDbGllbnQgPSBBZ29yYVJUQy5jcmVhdGVDbGllbnQoeyBtb2RlOiAibGl2ZSIsIGNvZGVjOiAidnA4IiB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJUaGUgQnJvd2VyIGlzIG5vdCBzdXBwb3J0IGxpdmUhIik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pbml0VmlkZW9Qcm9maWxlcygpOwogICAgICAgIH0sCiAgICB9Cg=="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live.vue","sourceRoot":"src/views/live","sourcesContent":["<template>\n    <div>\n        <div ref=\"page\" class=\"live\">\n            <div id=\"local-player\" class=\"player-box\">\n                <div class=\"player-btn\" @click=\"livePrestart\" v-if=\"isLive\">\n                    <img src=\"@/assets/images/video-start.png\" class=\"video\" alt=\"\">\n                    <p class=\"text\">开始直播</p>\n                </div>\n                <div class=\"endBtn\" v-if=\"!isLive\" @click=\"endSkyLive\">直播中，结束直播</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {postPrestart,postSkyStartLive,postSkyEndLive} from '@/api/liveService.js'\nimport AgoraRTC from \"agora-rtc-sdk-ng\"\n\nimport {MixIns} from \"@/api/mixins.js\"\n    export default {\n        mixins:[MixIns],\n        data(){\n            return{\n                //直播按钮\n                isLive:true,\n                //屏幕高度\n                clientHeight:'',\n                //活动ID\n                eventId:'',\n                //声网 项目ID\n                appid: \"\",\n                //直播房间\n                channel: \"\", //webId\n                //房间内 用户ID\n                uid: 0,\n                //本次直播  ID\n                lhid: 0,\n                //声网token\n                token: \"\",\n                //角色 （主播和观众）\n                role: \"host\",\n                //声网  直播客户端\n                client :null,\n                //当前 轨道\n                localTracks :{\n                    videoTrack: null,\n                    audioTrack: null\n                },\n                //麦克风\n                mics : [], // all microphones devices you can use\n                //摄像头\n                cams : [], // all cameras devices you can use\n                // 当前麦克风和摄像头\n                currentMic:null, // the microphone you are using\n                currentCam:null, // the camera you are using\n                //直播分辨率\n                videoProfiles : [\n                    { label: \"480p_1\", detail: \"640×480, 15fps, 500Kbps\", value: \"480p_1\" },\n                    { label: \"480p_2\", detail: \"640×480, 30fps, 1000Kbps\", value: \"480p_2\" },\n                    { label: \"720p_1\", detail: \"1280×720, 15fps, 1130Kbps\", value: \"720p_1\" },\n                    { label: \"720p_2\", detail: \"1280×720, 30fps, 2000Kbps\", value: \"720p_2\" },\n                    { label: \"1080p_1\", detail: \"1920×1080, 15fps, 2080Kbps\", value: \"1080p_1\" },\n                    { label: \"1080p_2\", detail: \"1920×1080, 30fps, 3000Kbps\", value: \"1080p_2\" },\n                    { label: \"200×640\", detail: \"200×640, 30fps\", value: { width: 200, height: 640, frameRate: 30 } } // custom video profile\n                ],\n                // 当前分辨率\n                curVideoProfile:null\n            }\n        },\n        methods:{\n            //准备直播\n            async livePrestart(){\n                await postPrestart(this.eventId).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        let data = res.data.data\n                        this.appid = data.appId\n                        this.channel = data.channel\n                        this.uid = data.uid\n                        this.lhid = data.historyId\n                        this.token = data.token\n                        this.lives()\n                    }\n                })\n            },\n\n            async lives(){\n                 try {\n                    await this.startLive()\n                    //开始直播\n                    // this.skyStartLive()\n                    //volumeAnimation = requestAnimationFrame(setVolumeWave);\n                    this.isLive = false\n                }\n                catch (error) {\n                    console.error('start live failed!');\n                    console.error(error);\n                    // this.leaveLive();\n                    var errorCode = error.code;\n                    var errMsg = \"开启直播失败,\";\n                    if (errorCode === 'DEVICE_NOT_FOUND') {\n                        errMsg += \"未找到摄像头或麦克风设备!\";\n                    }\n                    errMsg += \"\\n详细错误信息\\n\" + error;\n                    alert(errMsg);\n                } finally {\n                    //$(\"#btn-stop-live\").attr(\"disabled\", false);\n                    //$(\"#enable-beauty\").attr(\"disabled\", false);\n                    //$(\"#disable-beauty\").attr(\"disabled\", true);\n                }\n            },\n            //声网开始直播\n            async startLive() {\n                console.log(\"startlive\")\n                // create Agora client\n                this.client.setClientRole(this.role);\n                console.log(this.appid, this.channel, this.token,this.uid)\n                // join the channel\n                this.uid = await this.client.join(this.appid, this.channel, this.token || null, this.uid);\n                console.log(\"end-join:\"+this.uid)\n                // create local audio and video tracks\n                this.localTracks.audioTrack = await AgoraRTC.createMicrophoneAudioTrack();\n                this.localTracks.videoTrack = await AgoraRTC.createCameraVideoTrack({ encoderConfig: this.curVideoProfile.value });\n                this.localTracks.audioTrack.setVolume(200);\n                const level = this.localTracks.audioTrack.getVolumeLevel();\n                console.log(\"local stream audio level\", level);\n                // // play local video track\n                this.localTracks.videoTrack.play(\"local-player\");\n                \n                // //$(\"#local-player-name\").text(`localTrack(${options.uid})`);\n                // // publish local tracks to channel\n                await this.client.publish([this.localTracks.audioTrack, this.localTracks.videoTrack]);\n                console.log(\"publish success\");\n                // client.on(\"user-left\", handleUserLeft);\n                // client.on(\"connection-state-change\", handleStateChange);\n                // client.on(\"token-privilege-will-expire\", function() {\n                //     console.log(\"onTokenPrivilegeWillExpire\");\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                // client.on(\"token-privilege-did-expire\", function() {\n                //     console.log(\"onTokenPrivilegeDidExpire\");\n                //     $(\"#verification-dialog-3\").modal(\"show\");\n                //     leaveLive();\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                //initStats();\n            },\n            //活动星空开始直播\n             skyStartLive(){\n                 postSkyStartLive(this.eventId,this.lhid).then(res => {\n                    console.log(res)\n\n                    if(res.data.rspCode == 1){\n                        console.log(res,'开始直播')\n                    }\n                })\n            },\n      \n            //声网结束直播\n            async leaveLive(){\n                if (this.localTracks.audioTrack) {\n                    this.localTracks.audioTrack.stop();\n                    this.localTracks.audioTrack.close();\n                    this.localTracks.audioTrack = undefined;\n                }\n\n                if (this.localTracks.videoTrack) {\n                    this.localTracks.videoTrack.stop();\n                    this.localTracks.videoTrack.close();\n                    this.localTracks.videoTrack = undefined;\n                }\n\n                await this.client.unpublish();\n                // leave the channel\n                await this.client.leave();\n            },\n            //初始化直播 分辨率   \n            initVideoProfiles() {\n                this.curVideoProfile = this.videoProfiles[3];\n            },\n            //活动星空结束直播\n            endSkyLive(){\n                this.leaveLive()\n                postSkyEndLive(this.eventId,this.lhid).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        console.log(res,'结束直播')\n                    }\n                })\n            }\n        },\n        created(){\n            this.eventId = this.$route.params.pathMatch\n\n            var browerSupport = AgoraRTC.checkSystemRequirements();\n            if (browerSupport) {\n                this.client = AgoraRTC.createClient({ mode: \"live\", codec: \"h264\" });\n                //screenShareClient = AgoraRTC.createClient({ mode: \"live\", codec: \"vp8\" });\n            } else {\n                alert(\"The Brower is not support live!\");\n                return;\n            }\n            this.initVideoProfiles();\n        },\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .live{\n        padding: 120px 0 150px;\n        box-sizing: border-box;\n        background: #0F5F54;\n    }\n    .player-box{\n        width: 90%;\n        height: 600px;\n        margin: 0 auto;\n        position: relative;\n        .player-btn{\n            display: inline-block;\n            position: absolute;\n            margin: auto;\n            left: 50%;\n            transform: translate3d(-50%,-50%,0);\n            cursor: pointer;\n            top: 50%;\n            .video{\n                width: 115px;\n                margin:0 auto 40px;\n                display: block;\n            }\n            .text{\n                background: #027AFF;\n                border-radius: 6px;\n                border: 1px solid #979797;\n                color: #fff;\n                line-height: 42px;\n                display: inline-block;\n                padding: 0 30px;\n            }\n        }\n        .endBtn{\n            display: inline-block;\n            position: absolute;\n            left: 50%;\n            transform: translateX(-50%);\n            bottom: 18px;\n            padding: 0 30px;\n            color: #fff;\n            cursor: pointer;\n            line-height: 44px;\n            background: #FF5755;\n            border-radius: 6px;\n            border: 1px solid #979797;\n        }\n    }\n</style>"]}]}