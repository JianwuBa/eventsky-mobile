{"remainingRequest":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/payment/payment.vue?vue&type=style&index=0&id=a4a5f55a&lang=less&scoped=true&","dependencies":[{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/payment/payment.vue","mtime":1622095846317},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250YWluZXJ7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmctdG9wOjM4cHg7CiAgICAudG9wewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgICAgICAgcGFkZGluZzogMTJweCAxMnB4IDE5cHggMTBweDsKICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgIC5uYW1lewogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgIGNvbG9yOiAjNEE0QTRBOwogICAgICAgICAgICBsaW5lLWhlaWdodDogMjRweDsKICAgICAgICB9CiAgICAgICAgLmRhdGV7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICAgICAgICAgIC50aW1lewogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgICAgICAgICAgY29sb3I6ICM0QTRBNEE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW1newogICAgICAgICAgICAgICAgd2lkdGg6IDE2cHg7CiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHNlY3Rpb24ubWlkZGxlLXRpY3sKICAgICAgICAKICAgICAgICAuc2VjLXRpdHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNGMkYzRjc7CiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDM4cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgY29sb3I6ICMwMDA7CiAgICAgICAgfQogICAgICAgIC5zZWMtY29udGVudHsKICAgICAgICAgICAgcGFkZGluZzogMCAxMHB4OwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47ICAgICAKICAgICAgICAgICAgYm94LXNoYWRvdzogMHB4IDBweCAzcHggMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTsKICAgICAgICAgICAgLm5hbWV7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgICAgICAgICBjb2xvcjogIzMyM0M0NzsKICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA2NHB4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIC5wcmljZXsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgICAgICAgICAgIGNvbG9yOiAjMDI3QUZGOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgc2VjdGlvbi5taWRkbGUtaW5mb3sKICAgICAgICAuc2VjLXRpdHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNGMkYzRjc7CiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDM4cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgY29sb3I6ICMwMDA7CiAgICAgICAgfQogICAgICAgIC5zZWMtY29udGVudHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI0ZGRkZGRjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMHB4IDFweCAwcHggMHB4ICNEREREREQ7CiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTJweCAxNnB4OwogICAgICAgIH0KICAgICAgICAvZGVlcC8gLmVsLWZvcm0taXRlbV9fbGFiZWx7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4OwogICAgICAgIH0KICAgICAgICAvZGVlcC8gLmVsLWlucHV0X19pbm5lcnsKICAgICAgICAgICAgaGVpZ2h0OiAzNHB4OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMzRweDsKICAgICAgICB9CiAgICAgICAgL2RlZXAvIC5lbC1mb3JtLWl0ZW0uaXMtcmVxdWlyZWQ6bm90KC5pcy1uby1hc3Rlcmlzayk+LmVsLWZvcm0taXRlbV9fbGFiZWw6YmVmb3JlewogICAgICAgICAgICBjb250ZW50OiAiIjsKICAgICAgICB9CiAgICAgICAgL2RlZXAvIC5lbC1mb3JtLWl0ZW17CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgfQogICAgICAgIC5wYXltZW50ewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICAudHlwZXsKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgICAgICAgICAgLm51bXsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAyN0FGRjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAucGF5bWVudC1idG57CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDI3QUZGOwogICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBsaW5lLWhlaWdodDogMzRweDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["payment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"payment.vue","sourceRoot":"src/views/payment","sourcesContent":["<template>\n    <div class=\"container\">\n        <Head :logoUrl=\"logoUrl\" class=\"head\"></Head>\n        <div class=\"top\">\n            <p class=\"name\">{{eventTit}}</p>\n            <div class=\"date\">\n                <img src=\"../../assets/images/eventicon.png\" alt=\"\">\n                <p class=\"time\">{{eventTime}}</p>\n            </div>\n        </div>\n        <section class=\"middle-tic\">\n            <h5 class=\"sec-tit\">门票信息</h5>\n            <div class=\"sec-content\" v-for=\"(item ,index) in ticArr\" :key=\"index\">\n                <p class=\"name\">{{item.title}} </p>\n                <p class=\"price\">售价：{{item.currency | filterCurrency}} {{item.amount}}</p>\n            </div>\n        </section>\n        <section class=\"middle-info\">\n            <h5 class=\"sec-tit\">门票信息</h5>\n            <div class=\"sec-content\">\n                <el-form ref=\"infoForm\"  :rules=\"rules\" :model=\"infoForm\">\n                    <el-form-item label=\"姓名\" prop=\"name\" >\n                        <el-input v-model=\"infoForm.name\" ></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"邮箱\" prop=\"email\" >\n                        <el-input v-model=\"infoForm.email\" ></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"公司\" prop=\"compony\" >\n                        <el-input v-model=\"infoForm.compony\" ></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"职位\" prop=\"position\" >\n                        <el-input v-model=\"infoForm.position\" ></el-input>\n                    </el-form-item>\n                    \n                    <el-row v-for=\"(item,idx) in infoForm.questionList\" :key=\"idx\">\n                        <el-col :span=\"24\" >\n                            <el-form-item \n                            :label=\"item.type\"  \n                            :rules=\"rules.qsname\" \n                            :prop=\"`questionList.${idx}.qsname`\"  \n                            >\n                                <el-input v-model=\"item.qsname\"></el-input>\n                            </el-form-item>\n                        </el-col>\n                    </el-row>\n                    <el-form-item label=\"留言\" prop=\"message\" >\n                        <el-input v-model=\"infoForm.message\" ></el-input>\n                    </el-form-item>\n                    <el-form-item >\n                        <div class=\"payment\">\n                            <p class=\"type\">\n                                <span>总计</span>\n                                <span class=\"num\">{{ticArr[0].currency | filterCurrency}} {{ticArr[0].amount}}</span>\n                            </p>\n                        </div>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button class=\"payment-btn\" @click=\"submitForm('infoForm')\" >付款</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </section>\n    </div>\n</template>\n\n<script>\nimport Head from '../../components/Head'\n    export default {\n        data(){\n            return{\n                //活动id\n                eventId:'',\n                //活动名称 时间  \n                eventTit:'',\n                eventTime:'',\n                //门票列表 报名问题列表\n                ticArr:'',\n                //主办方logo\n                logoUrl:'',\n                //门票ID\n                ticId:'',\n                //订单号\n                orderNo:'',\n                infoForm:{\n                    name:'',\n                    email:'',\n                    compony:'',\n                    position:'',\n                    message:'',\n                    questionList:[{\n                        qsname:'',\n                        type:'',\n                        id:''\n                    }],\n                },\n                rules: {\n                    name: [\n                        { required: true, message: '请填写姓名', trigger: 'blur' },\n                    ],\n                    email: [\n                        { required: true, message: '请填写邮箱', trigger: 'blur' },\n                    ],\n                    compony: [\n                        { required: true, message: '请填写公司', trigger: 'blur' },\n                    ],\n                    position: [\n                        { required: true, message: '请填写职位', trigger: 'blur' },\n                    ],\n                    message: [\n                        { required: false, message: '请填写留言', trigger: 'blur' },\n                    ],\n                    qsname: [\n                        { required: true, message: '内容不能为空', trigger: 'blur' },\n                    ]\n                    \n                }\n            }\n        },\n        components:{\n            Head,\n        },\n        \n        filters:{\n            filterCurrency(val){\n                if(val === \"人民币\"){\n                    return '¥'\n                }else{\n                    return '$'\n                }\n            },\n        },\n        methods:{\n            getAccountInfo(){\n                this.$http.get('/event-service/event/info/'+this.eventId).then(res => {\n                    if(res.data.rspCode == '1'){\n                        let data = res.data.data\n                        console.log(data)\n                        this.logoUrl = data.logoUrl\n                        this.eventTit=data.title\n                        this.eventTime=data.beginDate\n                        this.ticArr = data.priceList\n                        this.infoForm.questionList = data.questionList\n                        this.ticId = data.id\n                        let questionArr = []\n                        this.infoForm.questionList.forEach(function (item) {  \n                            if(item.type == 'SOCIAL_WECHAT') item.type = '微信'\n                            if(item.type == 'SOCIAL_LINKEDIN') item.type = '领英'\n                            if(item.type == 'SOCIAL_DINGDING') item.type = '丁丁'\n                            if(item.type == 'SOCIAL_ZHIHU') item.type = '知乎'\n                            questionArr.push({'qsname':'','type':item.type,'id':item.id})\n                        })\n                        this.infoForm.questionList = questionArr\n                    }\n                    \n                })\n            },\n            //订单信息及自定义问题 信息\n            paymentForm(){\n                let arr = [\n                    {\"titleKey\":\"name\",\"title\":\"姓名\",\"content\":this.infoForm.name},\n                    {\"titleKey\":\"email\",\"title\":\"邮箱\",\"content\":this.infoForm.email},\n                    {\"titleKey\":\"company\",\"title\":\"公司\",\"content\":this.infoForm.compony},\n                    {\"titleKey\":\"position\",\"title\":\"职位\",\"content\":this.infoForm.position},\n                ]\n                this.infoForm.questionList.forEach(function(item){\n                    arr.push({\"titleKey\":item.id,\"title\":(item.type),\"content\":item.qsname})\n                })\n                return arr \n            },\n            //提交订单信息\n            createOrder(){\n                let obj = {\n                    webId:this.eventId,\n                    items:this.ticId,\n                    qvs:JSON.stringify(this.paymentForm()),\n                    remark:this.infoForm.message\n                }\n                return obj\n            },\n            submitForm(formName) {\n                const formData = new FormData();\n                Object.keys(this.createOrder()).forEach((key) => {\n                    formData.append(key, this.createOrder()[key]);\n                });\n                \n                \n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                       this.$http.post(\"/order-service/order/create\",formData).then(res =>{\n                            if(res.data.rspCode == 1){\n                                this.orderNo = res.dadta.orderNo\n                            }\n                        })\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n        },\n        created(){\n            this.eventId = this.$route.params.pathMatch\n            this.getAccountInfo()\n        },\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .container{\n        width: 100%;\n        padding-top:38px;\n        .top{\n            width: 100%;\n            background: #fff;\n            padding: 12px 12px 19px 10px;\n            box-sizing: border-box;\n            .name{\n                font-size: 16px;\n                color: #4A4A4A;\n                line-height: 24px;\n            }\n            .date{\n                display: flex;\n                align-items: center;\n                margin-top: 10px;\n                .time{\n                    font-size: 12px;\n                    color: #4A4A4A;\n                }\n                img{\n                    width: 16px;\n                    margin-right: 5px;\n                }\n            }\n        }\n        section.middle-tic{\n            \n            .sec-tit{\n                width: 100%;\n                background: #F2F3F7;\n                padding: 0 10px;\n                box-sizing: border-box;\n                line-height: 38px;\n                font-size: 14px;\n                color: #000;\n            }\n            .sec-content{\n                padding: 0 10px;\n                box-sizing: border-box;\n                display: flex;\n                align-items: center;\n                justify-content: space-between;     \n                box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.2);\n                .name{\n                    font-size: 18px;\n                    color: #323C47;\n                    line-height: 64px;\n                }\n                .price{\n                    font-size: 12px;\n                    color: #027AFF;\n                }\n            }\n        }\n        section.middle-info{\n            .sec-tit{\n                width: 100%;\n                background: #F2F3F7;\n                padding: 0 10px;\n                box-sizing: border-box;\n                line-height: 38px;\n                font-size: 14px;\n                color: #000;\n            }\n            .sec-content{\n                background: #FFFFFF;\n                box-shadow: 0px 1px 0px 0px #DDDDDD;\n                padding: 10px 12px 16px;\n            }\n            /deep/ .el-form-item__label{\n                font-size: 14px;\n                color: #333;\n                line-height: 30px;\n            }\n            /deep/ .el-input__inner{\n                height: 34px;\n                line-height: 34px;\n            }\n            /deep/ .el-form-item.is-required:not(.is-no-asterisk)>.el-form-item__label:before{\n                content: \"\";\n            }\n            /deep/ .el-form-item{\n                margin-bottom: 10px;\n            }\n            .payment{\n                background: #fff;\n                padding: 0;\n                .type{\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    font-size: 18px;\n                    .num{\n                        color: #027AFF;\n                    }\n                }\n            }\n            .payment-btn{\n                width: 100%;\n                background: #027AFF;\n                color: #fff;\n                text-align: center;\n                line-height: 34px;\n                padding: 0;\n                font-size: 14px;\n            }\n        }\n    }\n</style>  "]}]}