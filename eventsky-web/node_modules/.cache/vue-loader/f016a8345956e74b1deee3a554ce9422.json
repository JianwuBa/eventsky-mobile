{"remainingRequest":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue","mtime":1622614530507},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cG9zdFByZXN0YXJ0fSBmcm9tICdAL2FwaS9saXZlU2VydmljZS5qcycKaW1wb3J0ICIuL2Fnb3JhL0Fnb3JhUlRDX04tNC4zLjAuanMiCgogICAgZXhwb3J0IGRlZmF1bHQgewogICAgICAgIGRhdGEoKXsKICAgICAgICAgICAgcmV0dXJuewogICAgICAgICAgICAgICAgLy/lsY/luZXpq5jluqYKICAgICAgICAgICAgICAgIGNsaWVudEhlaWdodDonJywKICAgICAgICAgICAgICAgIC8v5rS75YqoSUQKICAgICAgICAgICAgICAgIGV2ZW50SWQ6JycsCiAgICAgICAgICAgICAgIC8v5aOw572R5Y+C5pWwCiAgICAgICAgICAgICAgICBhcHBpZDogIiIsCiAgICAgICAgICAgICAgICBjaGFubmVsOiAiIiwgLy93ZWJJZAogICAgICAgICAgICAgICAgdWlkOiAwLAogICAgICAgICAgICAgICAgbGhpZDogMCwKICAgICAgICAgICAgICAgIHRva2VuOiAiIiwKICAgICAgICAgICAgICAgIHJvbGU6ICJob3N0IiwKCgogICAgICAgICAgICAgICAgY2xpZW50IDpudWxsLAoKICAgICAgICAgICAgICAgIGxvY2FsVHJhY2tzIDp7CiAgICAgICAgICAgICAgICAgICAgdmlkZW9UcmFjazogbnVsbCwKICAgICAgICAgICAgICAgICAgICBhdWRpb1RyYWNrOiBudWxsCiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIG1pY3MgOiBbXSwgLy8gYWxsIG1pY3JvcGhvbmVzIGRldmljZXMgeW91IGNhbiB1c2UKICAgICAgICAgICAgICAgIGNhbXMgOiBbXSwgLy8gYWxsIGNhbWVyYXMgZGV2aWNlcyB5b3UgY2FuIHVzZQogICAgICAgICAgICAgICAgY3VycmVudE1pYzpudWxsLCAvLyB0aGUgbWljcm9waG9uZSB5b3UgYXJlIHVzaW5nCiAgICAgICAgICAgICAgICBjdXJyZW50Q2FtOm51bGwsIC8vIHRoZSBjYW1lcmEgeW91IGFyZSB1c2luZwoKICAgICAgICAgICAgICAgIHZpZGVvUHJvZmlsZXMgOiBbCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjQ4MHBfMSIsIGRldGFpbDogIjY0MMOXNDgwLCAxNWZwcywgNTAwS2JwcyIsIHZhbHVlOiAiNDgwcF8xIiB9LAogICAgICAgICAgICAgICAgICAgIHsgbGFiZWw6ICI0ODBwXzIiLCBkZXRhaWw6ICI2NDDDlzQ4MCwgMzBmcHMsIDEwMDBLYnBzIiwgdmFsdWU6ICI0ODBwXzIiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjcyMHBfMSIsIGRldGFpbDogIjEyODDDlzcyMCwgMTVmcHMsIDExMzBLYnBzIiwgdmFsdWU6ICI3MjBwXzEiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjcyMHBfMiIsIGRldGFpbDogIjEyODDDlzcyMCwgMzBmcHMsIDIwMDBLYnBzIiwgdmFsdWU6ICI3MjBwXzIiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjEwODBwXzEiLCBkZXRhaWw6ICIxOTIww5cxMDgwLCAxNWZwcywgMjA4MEticHMiLCB2YWx1ZTogIjEwODBwXzEiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjEwODBwXzIiLCBkZXRhaWw6ICIxOTIww5cxMDgwLCAzMGZwcywgMzAwMEticHMiLCB2YWx1ZTogIjEwODBwXzIiIH0sCiAgICAgICAgICAgICAgICAgICAgeyBsYWJlbDogIjIwMMOXNjQwIiwgZGV0YWlsOiAiMjAww5c2NDAsIDMwZnBzIiwgdmFsdWU6IHsgd2lkdGg6IDIwMCwgaGVpZ2h0OiA2NDAsIGZyYW1lUmF0ZTogMzAgfSB9IC8vIGN1c3RvbSB2aWRlbyBwcm9maWxlCiAgICAgICAgICAgICAgICBdLAoKICAgICAgICAgICAgICAgIGN1clZpZGVvUHJvZmlsZTpudWxsCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG1ldGhvZHM6ewogICAgICAgICAgICBhc3luYyBsaXZlUHJlc3RhcnQoKXsKICAgICAgICAgICAgICAgIHBvc3RQcmVzdGFydCh0aGlzLmV2ZW50SWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgICAgICAgICAgaWYocmVzLmRhdGEucnNwQ29kZSA9PSAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwaWQgPSBkYXRhLmFwcElkCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbm5lbCA9IGRhdGEuY2hhbm5lbAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVpZCA9IGRhdGEudWlkCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGhpZCA9IGRhdGEuaGlzdG9yeUlkCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9rZW4gPSBkYXRhLnRva2VuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zdGFydExpdmUoKTsKICAgICAgICAgICAgICAgICAgICAvL3VwZGF0ZUxpdmVTdGF0dXMod2ViSWQsIGxoaWQsICJMSVZJTkciKTsKICAgICAgICAgICAgICAgICAgICAvL3ZvbHVtZUFuaW1hdGlvbiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzZXRWb2x1bWVXYXZlKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc3RhcnQgbGl2ZSBmYWlsZWQhJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgLy8gbGVhdmVMaXZlKCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yQ29kZSA9IGVycm9yLmNvZGU7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVyck1zZyA9ICLlvIDlkK/nm7Tmkq3lpLHotKUsIjsKICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3JDb2RlID09PSAnREVWSUNFX05PVF9GT1VORCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICLmnKrmib7liLDmkYTlg4/lpLTmiJbpuqblhYvpo47orr7lpIchIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICJcbuivpue7humUmeivr+S/oeaBr1xuIiArIGVycm9yOwogICAgICAgICAgICAgICAgICAgIGFsZXJ0KGVyck1zZyk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIC8vJCgiI2J0bi1zdG9wLWxpdmUiKS5hdHRyKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAvLyQoIiNlbmFibGUtYmVhdXR5IikuYXR0cigiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgLy8kKCIjZGlzYWJsZS1iZWF1dHkiKS5hdHRyKCJkaXNhYmxlZCIsIHRydWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBhc3luYyBzdGFydExpdmUoKSB7CiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgQWdvcmEgY2xpZW50CiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudC5zZXRDbGllbnRSb2xlKHRoaXMucm9sZSk7CgogICAgICAgICAgICAgICAgLy8gam9pbiB0aGUgY2hhbm5lbAogICAgICAgICAgICAgICAgdGhpcy51aWQgPSBhd2FpdCB0aGlzLmNsaWVudC5qb2luKHRoaXMuYXBwaWQsIHRoaXMuY2hhbm5lbCwgdGhpcy50b2tlbiB8fCBudWxsLCB0aGlzLnVpZCk7CgogICAgICAgICAgICAgICAgLy8gY3JlYXRlIGxvY2FsIGF1ZGlvIGFuZCB2aWRlbyB0cmFja3MKICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjayA9IGF3YWl0IEFnb3JhUlRDLmNyZWF0ZU1pY3JvcGhvbmVBdWRpb1RyYWNrKCk7CiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2sgPSBhd2FpdCBBZ29yYVJUQy5jcmVhdGVDYW1lcmFWaWRlb1RyYWNrKHsgZW5jb2RlckNvbmZpZzogdGhpcy5jdXJWaWRlb1Byb2ZpbGUudmFsdWUgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suc2V0Vm9sdW1lKDIwMCk7CiAgICAgICAgICAgICAgICBjb25zdCBsZXZlbCA9IHRoaXMubG9jYWxUcmFja3MuYXVkaW9UcmFjay5nZXRWb2x1bWVMZXZlbCgpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImxvY2FsIHN0cmVhbSBhdWRpbyBsZXZlbCIsIGxldmVsKTsKICAgICAgICAgICAgICAgIC8vIHBsYXkgbG9jYWwgdmlkZW8gdHJhY2sKICAgICAgICAgICAgICAgIHRoaXMubG9jYWxUcmFja3MudmlkZW9UcmFjay5wbGF5KCJsb2NhbC1wbGF5ZXIiKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8kKCIjbG9jYWwtcGxheWVyLW5hbWUiKS50ZXh0KGBsb2NhbFRyYWNrKCR7b3B0aW9ucy51aWR9KWApOwogICAgICAgICAgICAgICAgLy8gcHVibGlzaCBsb2NhbCB0cmFja3MgdG8gY2hhbm5lbAogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jbGllbnQucHVibGlzaChbdGhpcy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLCB0aGlzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2tdKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJwdWJsaXNoIHN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIC8vIGNsaWVudC5vbigidXNlci1sZWZ0IiwgaGFuZGxlVXNlckxlZnQpOwogICAgICAgICAgICAgICAgLy8gY2xpZW50Lm9uKCJjb25uZWN0aW9uLXN0YXRlLWNoYW5nZSIsIGhhbmRsZVN0YXRlQ2hhbmdlKTsKICAgICAgICAgICAgICAgIC8vIGNsaWVudC5vbigidG9rZW4tcHJpdmlsZWdlLXdpbGwtZXhwaXJlIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coIm9uVG9rZW5Qcml2aWxlZ2VXaWxsRXhwaXJlIik7CiAgICAgICAgICAgICAgICAvLyAgICAgLy/ov5vooYzph43mlrDnlLPor7cgVG9rZW4g5pON5L2c5ZCOCiAgICAgICAgICAgICAgICAvLyAgICAgLy9jbGllbnQucmVuZXdUb2tlbih0b2tlbik7CiAgICAgICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgICAgIC8vIGNsaWVudC5vbigidG9rZW4tcHJpdmlsZWdlLWRpZC1leHBpcmUiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygib25Ub2tlblByaXZpbGVnZURpZEV4cGlyZSIpOwogICAgICAgICAgICAgICAgLy8gICAgICQoIiN2ZXJpZmljYXRpb24tZGlhbG9nLTMiKS5tb2RhbCgic2hvdyIpOwogICAgICAgICAgICAgICAgLy8gICAgIGxlYXZlTGl2ZSgpOwogICAgICAgICAgICAgICAgLy8gICAgIC8v6L+b6KGM6YeN5paw55Sz6K+3IFRva2VuIOaTjeS9nOWQjgogICAgICAgICAgICAgICAgLy8gICAgIC8vY2xpZW50LnJlbmV3VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvL2luaXRTdGF0cygpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgaW5pdFZpZGVvUHJvZmlsZXMoKSB7CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0aGlzLmN1clZpZGVvUHJvZmlsZSA9IHRoaXMudmlkZW9Qcm9maWxlc1szXTsKICAgICAgICAgICAgfQoKICAgICAgICB9LAogICAgICAgIG1vdW50ZWQoKXsKICAgICAgICAgICB0aGlzLmNsaWVudEhlaWdodCA9IGAke2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHR9YDsKICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXMKICAgICAgICAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhhdC5jbGllbnRIZWlnaHQgPSAgYCR7ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodH1gOwogICAgICAgICAgICAgICAgaWYodGhhdC4kcmVmcy5saXZlKXsKICAgICAgICAgICAgICAgICAgICB0aGF0LiRyZWZzLmxpdmUuc3R5bGUubWluSGVpZ2h0ID0gdGhhdC5jbGllbnRIZWlnaHQgKyAncHgnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjcmVhdGVkKCl7CiAgICAgICAgICAgICB0aGlzLmV2ZW50SWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucGF0aE1hdGNoCgogICAgICAgICAgICAgICAgdmFyIGJyb3dlclN1cHBvcnQgPSBBZ29yYVJUQy5jaGVja1N5c3RlbVJlcXVpcmVtZW50cygpOwogICAgICAgICAgICAgICAgaWYgKGJyb3dlclN1cHBvcnQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7IG1vZGU6ICJsaXZlIiwgY29kZWM6ICJoMjY0IiB9KTsKICAgICAgICAgICAgICAgICAgICAvL3NjcmVlblNoYXJlQ2xpZW50ID0gQWdvcmFSVEMuY3JlYXRlQ2xpZW50KHsgbW9kZTogImxpdmUiLCBjb2RlYzogInZwOCIgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJUaGUgQnJvd2VyIGlzIG5vdCBzdXBwb3J0IGxpdmUhIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5pbml0VmlkZW9Qcm9maWxlcygpOwogICAgICAgIH0sCiAgICAgICAgd2F0Y2g6ewogICAgICAgICAgICBjbGllbnRIZWlnaHQoY2xpZW50SGVpZ2h0KXsKICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5saXZlLnN0eWxlLm1pbkhlaWdodCA9IGNsaWVudEhlaWdodCArICdweCc7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cg=="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Live.vue","sourceRoot":"src/views/live","sourcesContent":["<template>\n    <div>\n        <div ref=\"live\" class=\"live\">\n            <el-button @click=\"livePrestart\" type=\"success\">开始直播</el-button>\n            <div id=\"local-player\">\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {postPrestart} from '@/api/liveService.js'\nimport \"./agora/AgoraRTC_N-4.3.0.js\"\n\n    export default {\n        data(){\n            return{\n                //屏幕高度\n                clientHeight:'',\n                //活动ID\n                eventId:'',\n               //声网参数\n                appid: \"\",\n                channel: \"\", //webId\n                uid: 0,\n                lhid: 0,\n                token: \"\",\n                role: \"host\",\n\n\n                client :null,\n\n                localTracks :{\n                    videoTrack: null,\n                    audioTrack: null\n                },\n\n                mics : [], // all microphones devices you can use\n                cams : [], // all cameras devices you can use\n                currentMic:null, // the microphone you are using\n                currentCam:null, // the camera you are using\n\n                videoProfiles : [\n                    { label: \"480p_1\", detail: \"640×480, 15fps, 500Kbps\", value: \"480p_1\" },\n                    { label: \"480p_2\", detail: \"640×480, 30fps, 1000Kbps\", value: \"480p_2\" },\n                    { label: \"720p_1\", detail: \"1280×720, 15fps, 1130Kbps\", value: \"720p_1\" },\n                    { label: \"720p_2\", detail: \"1280×720, 30fps, 2000Kbps\", value: \"720p_2\" },\n                    { label: \"1080p_1\", detail: \"1920×1080, 15fps, 2080Kbps\", value: \"1080p_1\" },\n                    { label: \"1080p_2\", detail: \"1920×1080, 30fps, 3000Kbps\", value: \"1080p_2\" },\n                    { label: \"200×640\", detail: \"200×640, 30fps\", value: { width: 200, height: 640, frameRate: 30 } } // custom video profile\n                ],\n\n                curVideoProfile:null\n            }\n        },\n        methods:{\n            async livePrestart(){\n                postPrestart(this.eventId).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        let data = res.data.data\n                        this.appid = data.appId\n                        this.channel = data.channel\n                        this.uid = data.uid\n                        this.lhid = data.historyId\n                        this.token = data.token\n                    }\n                })\n                try {\n                    await this.startLive();\n                    //updateLiveStatus(webId, lhid, \"LIVING\");\n                    //volumeAnimation = requestAnimationFrame(setVolumeWave);\n                } catch (error) {\n                    console.error('start live failed!');\n                    console.error(error);\n                    // leaveLive();\n                    var errorCode = error.code;\n                    var errMsg = \"开启直播失败,\";\n                    if (errorCode === 'DEVICE_NOT_FOUND') {\n                        errMsg += \"未找到摄像头或麦克风设备!\";\n                    }\n                    errMsg += \"\\n详细错误信息\\n\" + error;\n                    alert(errMsg);\n                } finally {\n                    //$(\"#btn-stop-live\").attr(\"disabled\", false);\n                    //$(\"#enable-beauty\").attr(\"disabled\", false);\n                    //$(\"#disable-beauty\").attr(\"disabled\", true);\n                }\n            },\n            async startLive() {\n                // create Agora client\n                this.client.setClientRole(this.role);\n\n                // join the channel\n                this.uid = await this.client.join(this.appid, this.channel, this.token || null, this.uid);\n\n                // create local audio and video tracks\n                this.localTracks.audioTrack = await AgoraRTC.createMicrophoneAudioTrack();\n                this.localTracks.videoTrack = await AgoraRTC.createCameraVideoTrack({ encoderConfig: this.curVideoProfile.value });\n                this.localTracks.audioTrack.setVolume(200);\n                const level = this.localTracks.audioTrack.getVolumeLevel();\n                console.log(\"local stream audio level\", level);\n                // play local video track\n                this.localTracks.videoTrack.play(\"local-player\");\n                \n                //$(\"#local-player-name\").text(`localTrack(${options.uid})`);\n                // publish local tracks to channel\n                await this.client.publish([this.localTracks.audioTrack, this.localTracks.videoTrack]);\n                console.log(\"publish success\");\n                // client.on(\"user-left\", handleUserLeft);\n                // client.on(\"connection-state-change\", handleStateChange);\n                // client.on(\"token-privilege-will-expire\", function() {\n                //     console.log(\"onTokenPrivilegeWillExpire\");\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                // client.on(\"token-privilege-did-expire\", function() {\n                //     console.log(\"onTokenPrivilegeDidExpire\");\n                //     $(\"#verification-dialog-3\").modal(\"show\");\n                //     leaveLive();\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                //initStats();\n            },\n\n            initVideoProfiles() {\n              \n                this.curVideoProfile = this.videoProfiles[3];\n            }\n\n        },\n        mounted(){\n           this.clientHeight = `${document.documentElement.clientHeight}`;\n           let that = this\n           window.onresize = function(){\n                that.clientHeight =  `${document.documentElement.clientHeight}`;\n                if(that.$refs.live){\n                    that.$refs.live.style.minHeight = that.clientHeight + 'px';\n                }\n            }\n        },\n        created(){\n             this.eventId = this.$route.params.pathMatch\n\n                var browerSupport = AgoraRTC.checkSystemRequirements();\n                if (browerSupport) {\n                    this.client = AgoraRTC.createClient({ mode: \"live\", codec: \"h264\" });\n                    //screenShareClient = AgoraRTC.createClient({ mode: \"live\", codec: \"vp8\" });\n                } else {\n                    alert(\"The Brower is not support live!\");\n                    return;\n                }\n                this.initVideoProfiles();\n        },\n        watch:{\n            clientHeight(clientHeight){\n               this.$refs.live.style.minHeight = clientHeight + 'px';\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .live{\n        padding: 120px 0 150px;\n        box-sizing: border-box;\n        background: skyblue;\n    }\n</style>"]}]}