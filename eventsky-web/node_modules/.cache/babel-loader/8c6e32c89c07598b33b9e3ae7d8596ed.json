{"remainingRequest":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/babel-loader/lib/index.js!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue","mtime":1622622511476},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9odW9kb25neGluZ2tvbmcvRGVza3RvcC9ldmVudHNreS9ldmVudHNreS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBwb3N0UHJlc3RhcnQsIHBvc3RTa3lTdGFydExpdmUsIHBvc3RTa3lFbmRMaXZlIH0gZnJvbSAnQC9hcGkvbGl2ZVNlcnZpY2UuanMnOwppbXBvcnQgQWdvcmFSVEMgZnJvbSAiYWdvcmEtcnRjLXNkay1uZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy/nm7Tmkq3mjInpkq4KICAgICAgaXNMaXZlOiB0cnVlLAogICAgICAvL+Wxj+W5lemrmOW6pgogICAgICBjbGllbnRIZWlnaHQ6ICcnLAogICAgICAvL+a0u+WKqElECiAgICAgIGV2ZW50SWQ6ICcnLAogICAgICAvL+WjsOe9kSDpobnnm65JRAogICAgICBhcHBpZDogIiIsCiAgICAgIC8v55u05pKt5oi/6Ze0CiAgICAgIGNoYW5uZWw6ICIiLAogICAgICAvL3dlYklkCiAgICAgIC8v5oi/6Ze05YaFIOeUqOaIt0lECiAgICAgIHVpZDogMCwKICAgICAgLy/mnKzmrKHnm7Tmkq0gIElECiAgICAgIGxoaWQ6IDAsCiAgICAgIC8v5aOw572RdG9rZW4KICAgICAgdG9rZW46ICIiLAogICAgICAvL+inkuiJsiDvvIjkuLvmkq3lkozop4LkvJfvvIkKICAgICAgcm9sZTogImhvc3QiLAogICAgICAvL+WjsOe9kSAg55u05pKt5a6i5oi356uvCiAgICAgIGNsaWVudDogbnVsbCwKICAgICAgLy/lvZPliY0g6L2o6YGTCiAgICAgIGxvY2FsVHJhY2tzOiB7CiAgICAgICAgdmlkZW9UcmFjazogbnVsbCwKICAgICAgICBhdWRpb1RyYWNrOiBudWxsCiAgICAgIH0sCiAgICAgIC8v6bqm5YWL6aOOCiAgICAgIG1pY3M6IFtdLAogICAgICAvLyBhbGwgbWljcm9waG9uZXMgZGV2aWNlcyB5b3UgY2FuIHVzZQogICAgICAvL+aRhOWDj+WktAogICAgICBjYW1zOiBbXSwKICAgICAgLy8gYWxsIGNhbWVyYXMgZGV2aWNlcyB5b3UgY2FuIHVzZQogICAgICAvLyDlvZPliY3puqblhYvpo47lkozmkYTlg4/lpLQKICAgICAgY3VycmVudE1pYzogbnVsbCwKICAgICAgLy8gdGhlIG1pY3JvcGhvbmUgeW91IGFyZSB1c2luZwogICAgICBjdXJyZW50Q2FtOiBudWxsLAogICAgICAvLyB0aGUgY2FtZXJhIHlvdSBhcmUgdXNpbmcKICAgICAgLy/nm7Tmkq3liIbovqjnjocKICAgICAgdmlkZW9Qcm9maWxlczogW3sKICAgICAgICBsYWJlbDogIjQ4MHBfMSIsCiAgICAgICAgZGV0YWlsOiAiNjQww5c0ODAsIDE1ZnBzLCA1MDBLYnBzIiwKICAgICAgICB2YWx1ZTogIjQ4MHBfMSIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAiNDgwcF8yIiwKICAgICAgICBkZXRhaWw6ICI2NDDDlzQ4MCwgMzBmcHMsIDEwMDBLYnBzIiwKICAgICAgICB2YWx1ZTogIjQ4MHBfMiIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAiNzIwcF8xIiwKICAgICAgICBkZXRhaWw6ICIxMjgww5c3MjAsIDE1ZnBzLCAxMTMwS2JwcyIsCiAgICAgICAgdmFsdWU6ICI3MjBwXzEiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIjcyMHBfMiIsCiAgICAgICAgZGV0YWlsOiAiMTI4MMOXNzIwLCAzMGZwcywgMjAwMEticHMiLAogICAgICAgIHZhbHVlOiAiNzIwcF8yIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICIxMDgwcF8xIiwKICAgICAgICBkZXRhaWw6ICIxOTIww5cxMDgwLCAxNWZwcywgMjA4MEticHMiLAogICAgICAgIHZhbHVlOiAiMTA4MHBfMSIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAiMTA4MHBfMiIsCiAgICAgICAgZGV0YWlsOiAiMTkyMMOXMTA4MCwgMzBmcHMsIDMwMDBLYnBzIiwKICAgICAgICB2YWx1ZTogIjEwODBwXzIiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIjIwMMOXNjQwIiwKICAgICAgICBkZXRhaWw6ICIyMDDDlzY0MCwgMzBmcHMiLAogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICB3aWR0aDogMjAwLAogICAgICAgICAgaGVpZ2h0OiA2NDAsCiAgICAgICAgICBmcmFtZVJhdGU6IDMwCiAgICAgICAgfQogICAgICB9IC8vIGN1c3RvbSB2aWRlbyBwcm9maWxlCiAgICAgIF0sCiAgICAgIC8vIOW9k+WJjeWIhui+qOeOhwogICAgICBjdXJWaWRlb1Byb2ZpbGU6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+WHhuWkh+ebtOaSrQogICAgbGl2ZVByZXN0YXJ0OiBmdW5jdGlvbiBsaXZlUHJlc3RhcnQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBlcnJvckNvZGUsIGVyck1zZzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBwb3N0UHJlc3RhcnQoX3RoaXMuZXZlbnRJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEucnNwQ29kZSA9PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmFwcGlkID0gZGF0YS5hcHBJZDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5jaGFubmVsID0gZGF0YS5jaGFubmVsOwogICAgICAgICAgICAgICAgICAgIF90aGlzLnVpZCA9IGRhdGEudWlkOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmxoaWQgPSBkYXRhLmhpc3RvcnlJZDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy50b2tlbiA9IGRhdGEudG9rZW47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN0YXJ0TGl2ZSgpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5za3lTdGFydExpdmUoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgLy92b2x1bWVBbmltYXRpb24gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2V0Vm9sdW1lV2F2ZSk7CiAgICAgICAgICAgICAgICBfdGhpcy5pc0xpdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEwOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgyKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3N0YXJ0IGxpdmUgZmFpbGVkIScpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7IC8vIHRoaXMubGVhdmVMaXZlKCk7CgogICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gX2NvbnRleHQudDAuY29kZTsKICAgICAgICAgICAgICAgIGVyck1zZyA9ICLlvIDlkK/nm7Tmkq3lpLHotKUsIjsKCiAgICAgICAgICAgICAgICBpZiAoZXJyb3JDb2RlID09PSAnREVWSUNFX05PVF9GT1VORCcpIHsKICAgICAgICAgICAgICAgICAgZXJyTXNnICs9ICLmnKrmib7liLDmkYTlg4/lpLTmiJbpuqblhYvpo47orr7lpIchIjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlcnJNc2cgKz0gIlxu6K+m57uG6ZSZ6K+v5L+h5oGvXG4iICsgX2NvbnRleHQudDA7CiAgICAgICAgICAgICAgICBhbGVydChlcnJNc2cpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE5OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgxOSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDEwLCAxOSwgMjFdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8v5aOw572R5byA5aeL55u05pKtCiAgICBzdGFydExpdmU6IGZ1bmN0aW9uIHN0YXJ0TGl2ZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgbGV2ZWw7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBBZ29yYSBjbGllbnQKICAgICAgICAgICAgICAgIF90aGlzMi5jbGllbnQuc2V0Q2xpZW50Um9sZShfdGhpczIucm9sZSk7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMyLmFwcGlkLCBfdGhpczIuY2hhbm5lbCwgX3RoaXMyLnRva2VuLCBfdGhpczIudWlkKTsgLy8gam9pbiB0aGUgY2hhbm5lbAoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY2xpZW50LmpvaW4oX3RoaXMyLmFwcGlkLCBfdGhpczIuY2hhbm5lbCwgX3RoaXMyLnRva2VuIHx8IG51bGwsIF90aGlzMi51aWQpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfdGhpczIudWlkID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gQWdvcmFSVEMuY3JlYXRlTWljcm9waG9uZUF1ZGlvVHJhY2soKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX3RoaXMyLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2sgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gQWdvcmFSVEMuY3JlYXRlQ2FtZXJhVmlkZW9UcmFjayh7CiAgICAgICAgICAgICAgICAgIGVuY29kZXJDb25maWc6IF90aGlzMi5jdXJWaWRlb1Byb2ZpbGUudmFsdWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX3RoaXMyLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2sgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBfdGhpczIubG9jYWxUcmFja3MuYXVkaW9UcmFjay5zZXRWb2x1bWUoMjAwKTsKCiAgICAgICAgICAgICAgICBsZXZlbCA9IF90aGlzMi5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLmdldFZvbHVtZUxldmVsKCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygibG9jYWwgc3RyZWFtIGF1ZGlvIGxldmVsIiwgbGV2ZWwpOyAvLyBwbGF5IGxvY2FsIHZpZGVvIHRyYWNrCgogICAgICAgICAgICAgICAgX3RoaXMyLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2sucGxheSgibG9jYWwtcGxheWVyIik7IC8vJCgiI2xvY2FsLXBsYXllci1uYW1lIikudGV4dChgbG9jYWxUcmFjaygke29wdGlvbnMudWlkfSlgKTsKICAgICAgICAgICAgICAgIC8vIHB1Ymxpc2ggbG9jYWwgdHJhY2tzIHRvIGNoYW5uZWwKCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY2xpZW50LnB1Ymxpc2goW190aGlzMi5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrLCBfdGhpczIubG9jYWxUcmFja3MudmlkZW9UcmFja10pOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInB1Ymxpc2ggc3VjY2VzcyIpOyAvLyBjbGllbnQub24oInVzZXItbGVmdCIsIGhhbmRsZVVzZXJMZWZ0KTsKICAgICAgICAgICAgICAgIC8vIGNsaWVudC5vbigiY29ubmVjdGlvbi1zdGF0ZS1jaGFuZ2UiLCBoYW5kbGVTdGF0ZUNoYW5nZSk7CiAgICAgICAgICAgICAgICAvLyBjbGllbnQub24oInRva2VuLXByaXZpbGVnZS13aWxsLWV4cGlyZSIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJvblRva2VuUHJpdmlsZWdlV2lsbEV4cGlyZSIpOwogICAgICAgICAgICAgICAgLy8gICAgIC8v6L+b6KGM6YeN5paw55Sz6K+3IFRva2VuIOaTjeS9nOWQjgogICAgICAgICAgICAgICAgLy8gICAgIC8vY2xpZW50LnJlbmV3VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICAvLyBjbGllbnQub24oInRva2VuLXByaXZpbGVnZS1kaWQtZXhwaXJlIiwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coIm9uVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmUiKTsKICAgICAgICAgICAgICAgIC8vICAgICAkKCIjdmVyaWZpY2F0aW9uLWRpYWxvZy0zIikubW9kYWwoInNob3ciKTsKICAgICAgICAgICAgICAgIC8vICAgICBsZWF2ZUxpdmUoKTsKICAgICAgICAgICAgICAgIC8vICAgICAvL+i/m+ihjOmHjeaWsOeUs+ivtyBUb2tlbiDmk43kvZzlkI4KICAgICAgICAgICAgICAgIC8vICAgICAvL2NsaWVudC5yZW5ld1Rva2VuKHRva2VuKTsKICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgICAgLy9pbml0U3RhdHMoKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8v5rS75Yqo5pif56m65byA5aeL55u05pKtCiAgICBza3lTdGFydExpdmU6IGZ1bmN0aW9uIHNreVN0YXJ0TGl2ZSgpIHsKICAgICAgcG9zdFNreVN0YXJ0TGl2ZSh0aGlzLmV2ZW50SWQsIHRoaXMubGhpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5kYXRhLnJzcENvZGUgPT0gMSkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzLCAn5byA5aeL55u05pKtJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+WjsOe9kee7k+adn+ebtOaSrQogICAgbGVhdmVMaXZlOiBmdW5jdGlvbiBsZWF2ZUxpdmUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMubG9jYWxUcmFja3MuYXVkaW9UcmFjaykgewogICAgICAgICAgICAgICAgICBfdGhpczMubG9jYWxUcmFja3MuYXVkaW9UcmFjay5zdG9wKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczMubG9jYWxUcmFja3MuYXVkaW9UcmFjay5jbG9zZSgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2sgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrLnN0b3AoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrLmNsb3NlKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczMubG9jYWxUcmFja3MudmlkZW9UcmFjayA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmNsaWVudC51bnB1Ymxpc2goKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5jbGllbnQubGVhdmUoKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/liJ3lp4vljJbnm7Tmkq0g5YiG6L6o546HICAgCiAgICBpbml0VmlkZW9Qcm9maWxlczogZnVuY3Rpb24gaW5pdFZpZGVvUHJvZmlsZXMoKSB7CiAgICAgIHRoaXMuY3VyVmlkZW9Qcm9maWxlID0gdGhpcy52aWRlb1Byb2ZpbGVzWzNdOwogICAgfSwKICAgIC8v5rS75Yqo5pif56m657uT5p2f55u05pKtCiAgICBlbmRTa3lMaXZlOiBmdW5jdGlvbiBlbmRTa3lMaXZlKCkgewogICAgICB0aGlzLmxlYXZlTGl2ZSgpOwogICAgICBwb3N0U2t5RW5kTGl2ZSh0aGlzLmV2ZW50SWQsIHRoaXMubGhpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5kYXRhLnJzcENvZGUgPT0gMSkgewogICAgICAgICAgY29uc29sZS5sb2cocmVzLCAn57uT5p2f55u05pKtJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNsaWVudEhlaWdodCA9ICIiLmNvbmNhdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTsKICAgIHZhciB0aGF0ID0gdGhpczsKCiAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoYXQuY2xpZW50SGVpZ2h0ID0gIiIuY29uY2F0KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpOwoKICAgICAgaWYgKHRoYXQuJHJlZnMubGl2ZSkgewogICAgICAgIHRoYXQuJHJlZnMubGl2ZS5zdHlsZS5taW5IZWlnaHQgPSB0aGF0LmNsaWVudEhlaWdodCArICdweCc7CiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5ldmVudElkID0gdGhpcy4kcm91dGUucGFyYW1zLnBhdGhNYXRjaDsKICAgIHZhciBicm93ZXJTdXBwb3J0ID0gQWdvcmFSVEMuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKTsKCiAgICBpZiAoYnJvd2VyU3VwcG9ydCkgewogICAgICB0aGlzLmNsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7CiAgICAgICAgbW9kZTogImxpdmUiLAogICAgICAgIGNvZGVjOiAiaDI2NCIKICAgICAgfSk7IC8vc2NyZWVuU2hhcmVDbGllbnQgPSBBZ29yYVJUQy5jcmVhdGVDbGllbnQoeyBtb2RlOiAibGl2ZSIsIGNvZGVjOiAidnA4IiB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGFsZXJ0KCJUaGUgQnJvd2VyIGlzIG5vdCBzdXBwb3J0IGxpdmUhIik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmluaXRWaWRlb1Byb2ZpbGVzKCk7CiAgfSwKICB3YXRjaDogewogICAgY2xpZW50SGVpZ2h0OiBmdW5jdGlvbiBjbGllbnRIZWlnaHQoX2NsaWVudEhlaWdodCkgewogICAgICB0aGlzLiRyZWZzLmxpdmUuc3R5bGUubWluSGVpZ2h0ID0gX2NsaWVudEhlaWdodCArICdweCc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAeA,SAAA,YAAA,EAAA,gBAAA,EAAA,cAAA,QAAA,sBAAA;AACA,OAAA,QAAA,MAAA,kBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA;AACA,MAAA,MAAA,EAAA,IAFA;AAGA;AACA,MAAA,YAAA,EAAA,EAJA;AAKA;AACA,MAAA,OAAA,EAAA,EANA;AAOA;AACA,MAAA,KAAA,EAAA,EARA;AASA;AACA,MAAA,OAAA,EAAA,EAVA;AAUA;AACA;AACA,MAAA,GAAA,EAAA,CAZA;AAaA;AACA,MAAA,IAAA,EAAA,CAdA;AAeA;AACA,MAAA,KAAA,EAAA,EAhBA;AAiBA;AACA,MAAA,IAAA,EAAA,MAlBA;AAmBA;AACA,MAAA,MAAA,EAAA,IApBA;AAqBA;AACA,MAAA,WAAA,EAAA;AACA,QAAA,UAAA,EAAA,IADA;AAEA,QAAA,UAAA,EAAA;AAFA,OAtBA;AA0BA;AACA,MAAA,IAAA,EAAA,EA3BA;AA2BA;AACA;AACA,MAAA,IAAA,EAAA,EA7BA;AA6BA;AACA;AACA,MAAA,UAAA,EAAA,IA/BA;AA+BA;AACA,MAAA,UAAA,EAAA,IAhCA;AAgCA;AACA;AACA,MAAA,aAAA,EAAA,CACA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,MAAA,EAAA,yBAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,MAAA,EAAA,0BAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,MAAA,EAAA,2BAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAHA,EAIA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,MAAA,EAAA,2BAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAJA,EAKA;AAAA,QAAA,KAAA,EAAA,SAAA;AAAA,QAAA,MAAA,EAAA,4BAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OALA,EAMA;AAAA,QAAA,KAAA,EAAA,SAAA;AAAA,QAAA,MAAA,EAAA,4BAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OANA,EAOA;AAAA,QAAA,KAAA,EAAA,SAAA;AAAA,QAAA,MAAA,EAAA,gBAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,KAAA,EAAA,GAAA;AAAA,UAAA,MAAA,EAAA,GAAA;AAAA,UAAA,SAAA,EAAA;AAAA;AAAA,OAPA,CAOA;AAPA,OAlCA;AA2CA;AACA,MAAA,eAAA,EAAA;AA5CA,KAAA;AA8CA,GAhDA;AAiDA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,YAFA,0BAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,YAAA,CAAA,KAAA,CAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,sBAAA,GAAA,CAAA,IAAA,CAAA,OAAA,IAAA,CAAA,EAAA;AACA,wBAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,oBAAA,KAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA;AACA,oBAAA,KAAA,CAAA,OAAA,GAAA,IAAA,CAAA,OAAA;AACA,oBAAA,KAAA,CAAA,GAAA,GAAA,IAAA,CAAA,GAAA;AACA,oBAAA,KAAA,CAAA,IAAA,GAAA,IAAA,CAAA,SAAA;AACA,oBAAA,KAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA;AACA;AACA,iBAVA,CADA;;AAAA;AAAA;AAAA;AAAA,uBAaA,KAAA,CAAA,SAAA,EAbA;;AAAA;AAAA;AAAA,uBAeA,KAAA,CAAA,YAAA,EAfA;;AAAA;AAgBA;AACA,gBAAA,KAAA,CAAA,MAAA,GAAA,KAAA;AAjBA;AAAA;;AAAA;AAAA;AAAA;AAoBA,gBAAA,OAAA,CAAA,KAAA,CAAA,oBAAA;AACA,gBAAA,OAAA,CAAA,KAAA,cArBA,CAsBA;;AACA,gBAAA,SAvBA,GAuBA,YAAA,IAvBA;AAwBA,gBAAA,MAxBA,GAwBA,SAxBA;;AAyBA,oBAAA,SAAA,KAAA,kBAAA,EAAA;AACA,kBAAA,MAAA,IAAA,eAAA;AACA;;AACA,gBAAA,MAAA,IAAA,0BAAA;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA;;AA7BA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoCA,KAtCA;AAuCA;AACA,IAAA,SAxCA,uBAwCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,gBAAA,MAAA,CAAA,MAAA,CAAA,aAAA,CAAA,MAAA,CAAA,IAAA;;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,EAAA,MAAA,CAAA,OAAA,EAAA,MAAA,CAAA,KAAA,EAAA,MAAA,CAAA,GAAA,EAHA,CAIA;;AAJA;AAAA,uBAKA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CAAA,KAAA,EAAA,MAAA,CAAA,OAAA,EAAA,MAAA,CAAA,KAAA,IAAA,IAAA,EAAA,MAAA,CAAA,GAAA,CALA;;AAAA;AAKA,gBAAA,MAAA,CAAA,GALA;AAAA;AAAA,uBAQA,QAAA,CAAA,0BAAA,EARA;;AAAA;AAQA,gBAAA,MAAA,CAAA,WAAA,CAAA,UARA;AAAA;AAAA,uBASA,QAAA,CAAA,sBAAA,CAAA;AAAA,kBAAA,aAAA,EAAA,MAAA,CAAA,eAAA,CAAA;AAAA,iBAAA,CATA;;AAAA;AASA,gBAAA,MAAA,CAAA,WAAA,CAAA,UATA;;AAUA,gBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,SAAA,CAAA,GAAA;;AACA,gBAAA,KAXA,GAWA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,cAAA,EAXA;AAYA,gBAAA,OAAA,CAAA,GAAA,CAAA,0BAAA,EAAA,KAAA,EAZA,CAaA;;AACA,gBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,IAAA,CAAA,cAAA,EAdA,CAgBA;AACA;;;AAjBA;AAAA,uBAkBA,MAAA,CAAA,MAAA,CAAA,OAAA,CAAA,CAAA,MAAA,CAAA,WAAA,CAAA,UAAA,EAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,CAlBA;;AAAA;AAmBA,gBAAA,OAAA,CAAA,GAAA,CAAA,iBAAA,EAnBA,CAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAlCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmCA,KA3EA;AA4EA;AACA,IAAA,YA7EA,0BA6EA;AACA,MAAA,gBAAA,CAAA,KAAA,OAAA,EAAA,KAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AAEA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,IAAA,CAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAAA,MAAA;AACA;AACA,OANA;AAOA,KArFA;AAuFA;AACA,IAAA,SAxFA,uBAwFA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,EAAA;AACA,kBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,IAAA;;AACA,kBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,KAAA;;AACA,kBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,GAAA,SAAA;AACA;;AAEA,oBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,EAAA;AACA,kBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,IAAA;;AACA,kBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,CAAA,KAAA;;AACA,kBAAA,MAAA,CAAA,WAAA,CAAA,UAAA,GAAA,SAAA;AACA;;AAXA;AAAA,uBAaA,MAAA,CAAA,MAAA,CAAA,SAAA,EAbA;;AAAA;AAAA;AAAA,uBAeA,MAAA,CAAA,MAAA,CAAA,KAAA,EAfA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA,KAxGA;AAyGA;AACA,IAAA,iBA1GA,+BA0GA;AACA,WAAA,eAAA,GAAA,KAAA,aAAA,CAAA,CAAA,CAAA;AACA,KA5GA;AA6GA;AACA,IAAA,UA9GA,wBA8GA;AACA,WAAA,SAAA;AACA,MAAA,cAAA,CAAA,KAAA,OAAA,EAAA,KAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,IAAA,CAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAAA,MAAA;AACA;AACA,OALA;AAMA;AAtHA,GAjDA;AAyKA,EAAA,OAzKA,qBAyKA;AACA,SAAA,YAAA,aAAA,QAAA,CAAA,eAAA,CAAA,YAAA;AACA,QAAA,IAAA,GAAA,IAAA;;AACA,IAAA,MAAA,CAAA,QAAA,GAAA,YAAA;AACA,MAAA,IAAA,CAAA,YAAA,aAAA,QAAA,CAAA,eAAA,CAAA,YAAA;;AACA,UAAA,IAAA,CAAA,KAAA,CAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,SAAA,GAAA,IAAA,CAAA,YAAA,GAAA,IAAA;AACA;AACA,KALA;AAMA,GAlLA;AAmLA,EAAA,OAnLA,qBAmLA;AACA,SAAA,OAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,SAAA;AAEA,QAAA,aAAA,GAAA,QAAA,CAAA,uBAAA,EAAA;;AACA,QAAA,aAAA,EAAA;AACA,WAAA,MAAA,GAAA,QAAA,CAAA,YAAA,CAAA;AAAA,QAAA,IAAA,EAAA,MAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA,CAAA,CADA,CAEA;AACA,KAHA,MAGA;AACA,MAAA,KAAA,CAAA,iCAAA,CAAA;AACA;AACA;;AACA,SAAA,iBAAA;AACA,GA/LA;AAgMA,EAAA,KAAA,EAAA;AACA,IAAA,YADA,wBACA,aADA,EACA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,SAAA,GAAA,aAAA,GAAA,IAAA;AACA;AAHA;AAhMA,CAAA","sourcesContent":["<template>\n    <div>\n        <div ref=\"live\" class=\"live\">\n            <div id=\"local-player\" class=\"player-box\">\n                <div class=\"player-btn\" @click=\"livePrestart\" v-if=\"isLive\">\n                    <img src=\"@/assets/images/video-start.png\" class=\"video\" alt=\"\">\n                    <p class=\"text\">开始直播</p>\n                </div>\n                <div class=\"endBtn\" v-if=\"!isLive\" @click=\"endSkyLive\">直播中，结束直播</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {postPrestart,postSkyStartLive,postSkyEndLive} from '@/api/liveService.js'\nimport AgoraRTC from \"agora-rtc-sdk-ng\"\n    export default {\n        data(){\n            return{\n                //直播按钮\n                isLive:true,\n                //屏幕高度\n                clientHeight:'',\n                //活动ID\n                eventId:'',\n                //声网 项目ID\n                appid: \"\",\n                //直播房间\n                channel: \"\", //webId\n                //房间内 用户ID\n                uid: 0,\n                //本次直播  ID\n                lhid: 0,\n                //声网token\n                token: \"\",\n                //角色 （主播和观众）\n                role: \"host\",\n                //声网  直播客户端\n                client :null,\n                //当前 轨道\n                localTracks :{\n                    videoTrack: null,\n                    audioTrack: null\n                },\n                //麦克风\n                mics : [], // all microphones devices you can use\n                //摄像头\n                cams : [], // all cameras devices you can use\n                // 当前麦克风和摄像头\n                currentMic:null, // the microphone you are using\n                currentCam:null, // the camera you are using\n                //直播分辨率\n                videoProfiles : [\n                    { label: \"480p_1\", detail: \"640×480, 15fps, 500Kbps\", value: \"480p_1\" },\n                    { label: \"480p_2\", detail: \"640×480, 30fps, 1000Kbps\", value: \"480p_2\" },\n                    { label: \"720p_1\", detail: \"1280×720, 15fps, 1130Kbps\", value: \"720p_1\" },\n                    { label: \"720p_2\", detail: \"1280×720, 30fps, 2000Kbps\", value: \"720p_2\" },\n                    { label: \"1080p_1\", detail: \"1920×1080, 15fps, 2080Kbps\", value: \"1080p_1\" },\n                    { label: \"1080p_2\", detail: \"1920×1080, 30fps, 3000Kbps\", value: \"1080p_2\" },\n                    { label: \"200×640\", detail: \"200×640, 30fps\", value: { width: 200, height: 640, frameRate: 30 } } // custom video profile\n                ],\n                // 当前分辨率\n                curVideoProfile:null\n            }\n        },\n        methods:{\n            //准备直播\n            async livePrestart(){\n                await postPrestart(this.eventId).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        let data = res.data.data\n                        this.appid = data.appId\n                        this.channel = data.channel\n                        this.uid = data.uid\n                        this.lhid = data.historyId\n                        this.token = data.token\n                    }\n                })\n                try {\n                    await this.startLive();\n                    //开始直播\n                    await this.skyStartLive();\n                    //volumeAnimation = requestAnimationFrame(setVolumeWave);\n                    this.isLive = false\n                } \n                catch (error) {\n                    console.error('start live failed!');\n                    console.error(error);\n                    // this.leaveLive();\n                    var errorCode = error.code;\n                    var errMsg = \"开启直播失败,\";\n                    if (errorCode === 'DEVICE_NOT_FOUND') {\n                        errMsg += \"未找到摄像头或麦克风设备!\";\n                    }\n                    errMsg += \"\\n详细错误信息\\n\" + error;\n                    alert(errMsg);\n                } finally {\n                    \n                    //$(\"#btn-stop-live\").attr(\"disabled\", false);\n                    //$(\"#enable-beauty\").attr(\"disabled\", false);\n                    //$(\"#disable-beauty\").attr(\"disabled\", true);\n                }\n            },\n            //声网开始直播\n            async startLive() {\n                // create Agora client\n                this.client.setClientRole(this.role);\n                console.log(this.appid, this.channel, this.token,this.uid)\n                // join the channel\n                this.uid = await this.client.join(this.appid, this.channel, this.token || null, this.uid);\n\n                // create local audio and video tracks\n                this.localTracks.audioTrack = await AgoraRTC.createMicrophoneAudioTrack();\n                this.localTracks.videoTrack = await AgoraRTC.createCameraVideoTrack({ encoderConfig: this.curVideoProfile.value });\n                this.localTracks.audioTrack.setVolume(200);\n                const level = this.localTracks.audioTrack.getVolumeLevel();\n                console.log(\"local stream audio level\", level);\n                // play local video track\n                this.localTracks.videoTrack.play(\"local-player\");\n                \n                //$(\"#local-player-name\").text(`localTrack(${options.uid})`);\n                // publish local tracks to channel\n                await this.client.publish([this.localTracks.audioTrack, this.localTracks.videoTrack]);\n                console.log(\"publish success\");\n                // client.on(\"user-left\", handleUserLeft);\n                // client.on(\"connection-state-change\", handleStateChange);\n                // client.on(\"token-privilege-will-expire\", function() {\n                //     console.log(\"onTokenPrivilegeWillExpire\");\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                // client.on(\"token-privilege-did-expire\", function() {\n                //     console.log(\"onTokenPrivilegeDidExpire\");\n                //     $(\"#verification-dialog-3\").modal(\"show\");\n                //     leaveLive();\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                //initStats();\n            },\n            //活动星空开始直播\n            skyStartLive(){\n                postSkyStartLive(this.eventId,this.lhid).then(res => {\n                    console.log(res)\n\n                    if(res.data.rspCode == 1){\n                        console.log(res,'开始直播')\n                    }\n                })\n            },\n      \n            //声网结束直播\n            async leaveLive(){\n                if (this.localTracks.audioTrack) {\n                    this.localTracks.audioTrack.stop();\n                    this.localTracks.audioTrack.close();\n                    this.localTracks.audioTrack = undefined;\n                }\n\n                if (this.localTracks.videoTrack) {\n                    this.localTracks.videoTrack.stop();\n                    this.localTracks.videoTrack.close();\n                    this.localTracks.videoTrack = undefined;\n                }\n\n                await this.client.unpublish();\n                // leave the channel\n                await this.client.leave();\n            },\n            //初始化直播 分辨率   \n            initVideoProfiles() {\n                this.curVideoProfile = this.videoProfiles[3];\n            },\n            //活动星空结束直播\n            endSkyLive(){\n                this.leaveLive()\n                postSkyEndLive(this.eventId,this.lhid).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        console.log(res,'结束直播')\n                    }\n                })\n            }\n        },\n        mounted(){\n           this.clientHeight = `${document.documentElement.clientHeight}`;\n           let that = this\n           window.onresize = function(){\n                that.clientHeight =  `${document.documentElement.clientHeight}`;\n                if(that.$refs.live){\n                    that.$refs.live.style.minHeight = that.clientHeight + 'px';\n                }\n            }\n        },\n        created(){\n            this.eventId = this.$route.params.pathMatch\n\n            var browerSupport = AgoraRTC.checkSystemRequirements();\n            if (browerSupport) {\n                this.client = AgoraRTC.createClient({ mode: \"live\", codec: \"h264\" });\n                //screenShareClient = AgoraRTC.createClient({ mode: \"live\", codec: \"vp8\" });\n            } else {\n                alert(\"The Brower is not support live!\");\n                return;\n            }\n            this.initVideoProfiles();\n        },\n        watch:{\n            clientHeight(clientHeight){\n               this.$refs.live.style.minHeight = clientHeight + 'px';\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .live{\n        padding: 120px 0 150px;\n        box-sizing: border-box;\n        background: #0F5F54;\n    }\n    .player-box{\n        width: 90%;\n        height: 600px;\n        margin: 0 auto;\n        position: relative;\n        .player-btn{\n            display: inline-block;\n            position: absolute;\n            margin: auto;\n            left: 50%;\n            transform: translate3d(-50%,-50%,0);\n            cursor: pointer;\n            top: 50%;\n            .video{\n                width: 115px;\n                margin:0 auto 40px;\n                display: block;\n            }\n            .text{\n                background: #027AFF;\n                border-radius: 6px;\n                border: 1px solid #979797;\n                color: #fff;\n                line-height: 42px;\n                display: inline-block;\n                padding: 0 30px;\n            }\n        }\n        .endBtn{\n            display: inline-block;\n            position: absolute;\n            left: 50%;\n            transform: translateX(-50%);\n            bottom: 18px;\n            padding: 0 30px;\n            color: #fff;\n            cursor: pointer;\n            line-height: 44px;\n            background: #FF5755;\n            border-radius: 6px;\n            border: 1px solid #979797;\n        }\n    }\n</style>"],"sourceRoot":"src/views/live"}]}