{"remainingRequest":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/babel-loader/lib/index.js!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/src/views/live/Live.vue","mtime":1623053817156},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huodongxingkong/Desktop/eventsky/eventsky-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9odW9kb25neGluZ2tvbmcvRGVza3RvcC9ldmVudHNreS9ldmVudHNreS13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBwb3N0UHJlc3RhcnQsIHBvc3RTa3lTdGFydExpdmUsIHBvc3RTa3lFbmRMaXZlIH0gZnJvbSAnQC9hcGkvbGl2ZVNlcnZpY2UuanMnOwppbXBvcnQgQWdvcmFSVEMgZnJvbSAiYWdvcmEtcnRjLXNkay1uZyI7CmltcG9ydCB7IE1peElucyB9IGZyb20gIkAvYXBpL21peGlucy5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtNaXhJbnNdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvL+ebtOaSreaMiemSrgogICAgICBpc0xpdmU6IHRydWUsCiAgICAgIC8v5bGP5bmV6auY5bqmCiAgICAgIGNsaWVudEhlaWdodDogJycsCiAgICAgIC8v5rS75YqoSUQKICAgICAgZXZlbnRJZDogJycsCiAgICAgIC8v5aOw572RIOmhueebrklECiAgICAgIGFwcGlkOiAiIiwKICAgICAgLy/nm7Tmkq3miL/pl7QKICAgICAgY2hhbm5lbDogIiIsCiAgICAgIC8vd2ViSWQKICAgICAgLy/miL/pl7TlhoUg55So5oi3SUQKICAgICAgdWlkOiAwLAogICAgICAvL+acrOasoeebtOaSrSAgSUQKICAgICAgbGhpZDogMCwKICAgICAgLy/lo7DnvZF0b2tlbgogICAgICB0b2tlbjogIiIsCiAgICAgIC8v6KeS6ImyIO+8iOS4u+aSreWSjOinguS8l++8iQogICAgICByb2xlOiAiaG9zdCIsCiAgICAgIC8v5aOw572RICDnm7Tmkq3lrqLmiLfnq68KICAgICAgY2xpZW50OiBudWxsLAogICAgICAvL+W9k+WJjSDovajpgZMKICAgICAgbG9jYWxUcmFja3M6IHsKICAgICAgICB2aWRlb1RyYWNrOiBudWxsLAogICAgICAgIGF1ZGlvVHJhY2s6IG51bGwKICAgICAgfSwKICAgICAgLy/puqblhYvpo44KICAgICAgbWljczogW10sCiAgICAgIC8vIGFsbCBtaWNyb3Bob25lcyBkZXZpY2VzIHlvdSBjYW4gdXNlCiAgICAgIC8v5pGE5YOP5aS0CiAgICAgIGNhbXM6IFtdLAogICAgICAvLyBhbGwgY2FtZXJhcyBkZXZpY2VzIHlvdSBjYW4gdXNlCiAgICAgIC8vIOW9k+WJjem6puWFi+mjjuWSjOaRhOWDj+WktAogICAgICBjdXJyZW50TWljOiBudWxsLAogICAgICAvLyB0aGUgbWljcm9waG9uZSB5b3UgYXJlIHVzaW5nCiAgICAgIGN1cnJlbnRDYW06IG51bGwsCiAgICAgIC8vIHRoZSBjYW1lcmEgeW91IGFyZSB1c2luZwogICAgICAvL+ebtOaSreWIhui+qOeOhwogICAgICB2aWRlb1Byb2ZpbGVzOiBbewogICAgICAgIGxhYmVsOiAiNDgwcF8xIiwKICAgICAgICBkZXRhaWw6ICI2NDDDlzQ4MCwgMTVmcHMsIDUwMEticHMiLAogICAgICAgIHZhbHVlOiAiNDgwcF8xIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICI0ODBwXzIiLAogICAgICAgIGRldGFpbDogIjY0MMOXNDgwLCAzMGZwcywgMTAwMEticHMiLAogICAgICAgIHZhbHVlOiAiNDgwcF8yIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICI3MjBwXzEiLAogICAgICAgIGRldGFpbDogIjEyODDDlzcyMCwgMTVmcHMsIDExMzBLYnBzIiwKICAgICAgICB2YWx1ZTogIjcyMHBfMSIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAiNzIwcF8yIiwKICAgICAgICBkZXRhaWw6ICIxMjgww5c3MjAsIDMwZnBzLCAyMDAwS2JwcyIsCiAgICAgICAgdmFsdWU6ICI3MjBwXzIiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogIjEwODBwXzEiLAogICAgICAgIGRldGFpbDogIjE5MjDDlzEwODAsIDE1ZnBzLCAyMDgwS2JwcyIsCiAgICAgICAgdmFsdWU6ICIxMDgwcF8xIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6ICIxMDgwcF8yIiwKICAgICAgICBkZXRhaWw6ICIxOTIww5cxMDgwLCAzMGZwcywgMzAwMEticHMiLAogICAgICAgIHZhbHVlOiAiMTA4MHBfMiIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiAiMjAww5c2NDAiLAogICAgICAgIGRldGFpbDogIjIwMMOXNjQwLCAzMGZwcyIsCiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIHdpZHRoOiAyMDAsCiAgICAgICAgICBoZWlnaHQ6IDY0MCwKICAgICAgICAgIGZyYW1lUmF0ZTogMzAKICAgICAgICB9CiAgICAgIH0gLy8gY3VzdG9tIHZpZGVvIHByb2ZpbGUKICAgICAgXSwKICAgICAgLy8g5b2T5YmN5YiG6L6o546HCiAgICAgIGN1clZpZGVvUHJvZmlsZTogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5YeG5aSH55u05pKtCiAgICBsaXZlUHJlc3RhcnQ6IGZ1bmN0aW9uIGxpdmVQcmVzdGFydCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9zdFByZXN0YXJ0KF90aGlzLmV2ZW50SWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnJzcENvZGUgPT0gMSkgewogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5hcHBpZCA9IGRhdGEuYXBwSWQ7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2hhbm5lbCA9IGRhdGEuY2hhbm5lbDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy51aWQgPSBkYXRhLnVpZDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5saGlkID0gZGF0YS5oaXN0b3J5SWQ7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMudG9rZW4gPSBkYXRhLnRva2VuOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy5saXZlcygpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxpdmVzOiBmdW5jdGlvbiBsaXZlcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgZXJyb3JDb2RlLCBlcnJNc2c7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc3RhcnRMaXZlKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIC8v5byA5aeL55u05pKtCiAgICAgICAgICAgICAgICAvLyB0aGlzLnNreVN0YXJ0TGl2ZSgpCiAgICAgICAgICAgICAgICAvL3ZvbHVtZUFuaW1hdGlvbiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzZXRWb2x1bWVXYXZlKTsKICAgICAgICAgICAgICAgIF90aGlzMi5pc0xpdmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA2OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc3RhcnQgbGl2ZSBmYWlsZWQhJyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0Mi50MCk7IC8vIHRoaXMubGVhdmVMaXZlKCk7CgogICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gX2NvbnRleHQyLnQwLmNvZGU7CiAgICAgICAgICAgICAgICBlcnJNc2cgPSAi5byA5ZCv55u05pKt5aSx6LSlLCI7CgogICAgICAgICAgICAgICAgaWYgKGVycm9yQ29kZSA9PT0gJ0RFVklDRV9OT1RfRk9VTkQnKSB7CiAgICAgICAgICAgICAgICAgIGVyck1zZyArPSAi5pyq5om+5Yiw5pGE5YOP5aS05oiW6bqm5YWL6aOO6K6+5aSHISI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZXJyTXNnICs9ICJcbuivpue7humUmeivr+S/oeaBr1xuIiArIF9jb250ZXh0Mi50MDsKICAgICAgICAgICAgICAgIGFsZXJ0KGVyck1zZyk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5maW5pc2goMTUpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzAsIDYsIDE1LCAxN11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy/lo7DnvZHlvIDlp4vnm7Tmkq0KICAgIHN0YXJ0TGl2ZTogZnVuY3Rpb24gc3RhcnRMaXZlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBsZXZlbDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInN0YXJ0bGl2ZSIpOyAvLyBjcmVhdGUgQWdvcmEgY2xpZW50CgogICAgICAgICAgICAgICAgX3RoaXMzLmNsaWVudC5zZXRDbGllbnRSb2xlKF90aGlzMy5yb2xlKTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczMuYXBwaWQsIF90aGlzMy5jaGFubmVsLCBfdGhpczMudG9rZW4sIF90aGlzMy51aWQpOyAvLyBqb2luIHRoZSBjaGFubmVsCgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5jbGllbnQuam9pbihfdGhpczMuYXBwaWQsIF90aGlzMy5jaGFubmVsLCBfdGhpczMudG9rZW4gfHwgbnVsbCwgX3RoaXMzLnVpZCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF90aGlzMy51aWQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlbmQtam9pbjoiICsgX3RoaXMzLnVpZCk7IC8vIGNyZWF0ZSBsb2NhbCBhdWRpbyBhbmQgdmlkZW8gdHJhY2tzCgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIEFnb3JhUlRDLmNyZWF0ZU1pY3JvcGhvbmVBdWRpb1RyYWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF90aGlzMy5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIEFnb3JhUlRDLmNyZWF0ZUNhbWVyYVZpZGVvVHJhY2soewogICAgICAgICAgICAgICAgICBlbmNvZGVyQ29uZmlnOiBfdGhpczMuY3VyVmlkZW9Qcm9maWxlLnZhbHVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF90aGlzMy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgX3RoaXMzLmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suc2V0Vm9sdW1lKDIwMCk7CgogICAgICAgICAgICAgICAgbGV2ZWwgPSBfdGhpczMubG9jYWxUcmFja3MuYXVkaW9UcmFjay5nZXRWb2x1bWVMZXZlbCgpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImxvY2FsIHN0cmVhbSBhdWRpbyBsZXZlbCIsIGxldmVsKTsgLy8gLy8gcGxheSBsb2NhbCB2aWRlbyB0cmFjawoKICAgICAgICAgICAgICAgIF90aGlzMy5sb2NhbFRyYWNrcy52aWRlb1RyYWNrLnBsYXkoImxvY2FsLXBsYXllciIpOyAvLyAvLyQoIiNsb2NhbC1wbGF5ZXItbmFtZSIpLnRleHQoYGxvY2FsVHJhY2soJHtvcHRpb25zLnVpZH0pYCk7CiAgICAgICAgICAgICAgICAvLyAvLyBwdWJsaXNoIGxvY2FsIHRyYWNrcyB0byBjaGFubmVsCgoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmNsaWVudC5wdWJsaXNoKFtfdGhpczMubG9jYWxUcmFja3MuYXVkaW9UcmFjaywgX3RoaXMzLmxvY2FsVHJhY2tzLnZpZGVvVHJhY2tdKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJwdWJsaXNoIHN1Y2Nlc3MiKTsgLy8gY2xpZW50Lm9uKCJ1c2VyLWxlZnQiLCBoYW5kbGVVc2VyTGVmdCk7CiAgICAgICAgICAgICAgICAvLyBjbGllbnQub24oImNvbm5lY3Rpb24tc3RhdGUtY2hhbmdlIiwgaGFuZGxlU3RhdGVDaGFuZ2UpOwogICAgICAgICAgICAgICAgLy8gY2xpZW50Lm9uKCJ0b2tlbi1wcml2aWxlZ2Utd2lsbC1leHBpcmUiLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygib25Ub2tlblByaXZpbGVnZVdpbGxFeHBpcmUiKTsKICAgICAgICAgICAgICAgIC8vICAgICAvL+i/m+ihjOmHjeaWsOeUs+ivtyBUb2tlbiDmk43kvZzlkI4KICAgICAgICAgICAgICAgIC8vICAgICAvL2NsaWVudC5yZW5ld1Rva2VuKHRva2VuKTsKICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICAgICAgLy8gY2xpZW50Lm9uKCJ0b2tlbi1wcml2aWxlZ2UtZGlkLWV4cGlyZSIsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCJvblRva2VuUHJpdmlsZWdlRGlkRXhwaXJlIik7CiAgICAgICAgICAgICAgICAvLyAgICAgJCgiI3ZlcmlmaWNhdGlvbi1kaWFsb2ctMyIpLm1vZGFsKCJzaG93Iik7CiAgICAgICAgICAgICAgICAvLyAgICAgbGVhdmVMaXZlKCk7CiAgICAgICAgICAgICAgICAvLyAgICAgLy/ov5vooYzph43mlrDnlLPor7cgVG9rZW4g5pON5L2c5ZCOCiAgICAgICAgICAgICAgICAvLyAgICAgLy9jbGllbnQucmVuZXdUb2tlbih0b2tlbik7CiAgICAgICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgICAgIC8vaW5pdFN0YXRzKCk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvL+a0u+WKqOaYn+epuuW8gOWni+ebtOaSrQogICAgc2t5U3RhcnRMaXZlOiBmdW5jdGlvbiBza3lTdGFydExpdmUoKSB7CiAgICAgIHBvc3RTa3lTdGFydExpdmUodGhpcy5ldmVudElkLCB0aGlzLmxoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIGlmIChyZXMuZGF0YS5yc3BDb2RlID09IDEpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcywgJ+W8gOWni+ebtOaSrScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy/lo7DnvZHnu5PmnZ/nm7Tmkq0KICAgIGxlYXZlTGl2ZTogZnVuY3Rpb24gbGVhdmVMaXZlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0LmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2spIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suc3RvcCgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM0LmxvY2FsVHJhY2tzLmF1ZGlvVHJhY2suY2xvc2UoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNC5sb2NhbFRyYWNrcy5hdWRpb1RyYWNrID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpczQubG9jYWxUcmFja3MudmlkZW9UcmFjaykgewogICAgICAgICAgICAgICAgICBfdGhpczQubG9jYWxUcmFja3MudmlkZW9UcmFjay5zdG9wKCk7CgogICAgICAgICAgICAgICAgICBfdGhpczQubG9jYWxUcmFja3MudmlkZW9UcmFjay5jbG9zZSgpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM0LmxvY2FsVHJhY2tzLnZpZGVvVHJhY2sgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5jbGllbnQudW5wdWJsaXNoKCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuY2xpZW50LmxlYXZlKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8v5Yid5aeL5YyW55u05pKtIOWIhui+qOeOhyAgIAogICAgaW5pdFZpZGVvUHJvZmlsZXM6IGZ1bmN0aW9uIGluaXRWaWRlb1Byb2ZpbGVzKCkgewogICAgICB0aGlzLmN1clZpZGVvUHJvZmlsZSA9IHRoaXMudmlkZW9Qcm9maWxlc1szXTsKICAgIH0sCiAgICAvL+a0u+WKqOaYn+epuue7k+adn+ebtOaSrQogICAgZW5kU2t5TGl2ZTogZnVuY3Rpb24gZW5kU2t5TGl2ZSgpIHsKICAgICAgdGhpcy5sZWF2ZUxpdmUoKTsKICAgICAgcG9zdFNreUVuZExpdmUodGhpcy5ldmVudElkLCB0aGlzLmxoaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIGlmIChyZXMuZGF0YS5yc3BDb2RlID09IDEpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcywgJ+e7k+adn+ebtOaSrScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5ldmVudElkID0gdGhpcy4kcm91dGUucGFyYW1zLnBhdGhNYXRjaDsKICAgIHZhciBicm93ZXJTdXBwb3J0ID0gQWdvcmFSVEMuY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHMoKTsKCiAgICBpZiAoYnJvd2VyU3VwcG9ydCkgewogICAgICB0aGlzLmNsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7CiAgICAgICAgbW9kZTogImxpdmUiLAogICAgICAgIGNvZGVjOiAiaDI2NCIKICAgICAgfSk7IC8vc2NyZWVuU2hhcmVDbGllbnQgPSBBZ29yYVJUQy5jcmVhdGVDbGllbnQoeyBtb2RlOiAibGl2ZSIsIGNvZGVjOiAidnA4IiB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGFsZXJ0KCJUaGUgQnJvd2VyIGlzIG5vdCBzdXBwb3J0IGxpdmUhIik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmluaXRWaWRlb1Byb2ZpbGVzKCk7CiAgfQp9Ow=="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <div ref=\"page\" class=\"live\">\n            <div id=\"local-player\" class=\"player-box\">\n                <div class=\"player-btn\" @click=\"livePrestart\" v-if=\"isLive\">\n                    <img src=\"@/assets/images/video-start.png\" class=\"video\" alt=\"\">\n                    <p class=\"text\">开始直播</p>\n                </div>\n                <div class=\"endBtn\" v-if=\"!isLive\" @click=\"endSkyLive\">直播中，结束直播</div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {postPrestart,postSkyStartLive,postSkyEndLive} from '@/api/liveService.js'\nimport AgoraRTC from \"agora-rtc-sdk-ng\"\n\nimport {MixIns} from \"@/api/mixins.js\"\n    export default {\n        mixins:[MixIns],\n        data(){\n            return{\n                //直播按钮\n                isLive:true,\n                //屏幕高度\n                clientHeight:'',\n                //活动ID\n                eventId:'',\n                //声网 项目ID\n                appid: \"\",\n                //直播房间\n                channel: \"\", //webId\n                //房间内 用户ID\n                uid: 0,\n                //本次直播  ID\n                lhid: 0,\n                //声网token\n                token: \"\",\n                //角色 （主播和观众）\n                role: \"host\",\n                //声网  直播客户端\n                client :null,\n                //当前 轨道\n                localTracks :{\n                    videoTrack: null,\n                    audioTrack: null\n                },\n                //麦克风\n                mics : [], // all microphones devices you can use\n                //摄像头\n                cams : [], // all cameras devices you can use\n                // 当前麦克风和摄像头\n                currentMic:null, // the microphone you are using\n                currentCam:null, // the camera you are using\n                //直播分辨率\n                videoProfiles : [\n                    { label: \"480p_1\", detail: \"640×480, 15fps, 500Kbps\", value: \"480p_1\" },\n                    { label: \"480p_2\", detail: \"640×480, 30fps, 1000Kbps\", value: \"480p_2\" },\n                    { label: \"720p_1\", detail: \"1280×720, 15fps, 1130Kbps\", value: \"720p_1\" },\n                    { label: \"720p_2\", detail: \"1280×720, 30fps, 2000Kbps\", value: \"720p_2\" },\n                    { label: \"1080p_1\", detail: \"1920×1080, 15fps, 2080Kbps\", value: \"1080p_1\" },\n                    { label: \"1080p_2\", detail: \"1920×1080, 30fps, 3000Kbps\", value: \"1080p_2\" },\n                    { label: \"200×640\", detail: \"200×640, 30fps\", value: { width: 200, height: 640, frameRate: 30 } } // custom video profile\n                ],\n                // 当前分辨率\n                curVideoProfile:null\n            }\n        },\n        methods:{\n            //准备直播\n            async livePrestart(){\n                await postPrestart(this.eventId).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        let data = res.data.data\n                        this.appid = data.appId\n                        this.channel = data.channel\n                        this.uid = data.uid\n                        this.lhid = data.historyId\n                        this.token = data.token\n                        this.lives()\n                    }\n                })\n            },\n\n            async lives(){\n                 try {\n                    await this.startLive()\n                    //开始直播\n                    // this.skyStartLive()\n                    //volumeAnimation = requestAnimationFrame(setVolumeWave);\n                    this.isLive = false\n                }\n                catch (error) {\n                    console.error('start live failed!');\n                    console.error(error);\n                    // this.leaveLive();\n                    var errorCode = error.code;\n                    var errMsg = \"开启直播失败,\";\n                    if (errorCode === 'DEVICE_NOT_FOUND') {\n                        errMsg += \"未找到摄像头或麦克风设备!\";\n                    }\n                    errMsg += \"\\n详细错误信息\\n\" + error;\n                    alert(errMsg);\n                } finally {\n                    //$(\"#btn-stop-live\").attr(\"disabled\", false);\n                    //$(\"#enable-beauty\").attr(\"disabled\", false);\n                    //$(\"#disable-beauty\").attr(\"disabled\", true);\n                }\n            },\n            //声网开始直播\n            async startLive() {\n                console.log(\"startlive\")\n                // create Agora client\n                this.client.setClientRole(this.role);\n                console.log(this.appid, this.channel, this.token,this.uid)\n                // join the channel\n                this.uid = await this.client.join(this.appid, this.channel, this.token || null, this.uid);\n                console.log(\"end-join:\"+this.uid)\n                // create local audio and video tracks\n                this.localTracks.audioTrack = await AgoraRTC.createMicrophoneAudioTrack();\n                this.localTracks.videoTrack = await AgoraRTC.createCameraVideoTrack({ encoderConfig: this.curVideoProfile.value });\n                this.localTracks.audioTrack.setVolume(200);\n                const level = this.localTracks.audioTrack.getVolumeLevel();\n                console.log(\"local stream audio level\", level);\n                // // play local video track\n                this.localTracks.videoTrack.play(\"local-player\");\n                \n                // //$(\"#local-player-name\").text(`localTrack(${options.uid})`);\n                // // publish local tracks to channel\n                await this.client.publish([this.localTracks.audioTrack, this.localTracks.videoTrack]);\n                console.log(\"publish success\");\n                // client.on(\"user-left\", handleUserLeft);\n                // client.on(\"connection-state-change\", handleStateChange);\n                // client.on(\"token-privilege-will-expire\", function() {\n                //     console.log(\"onTokenPrivilegeWillExpire\");\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                // client.on(\"token-privilege-did-expire\", function() {\n                //     console.log(\"onTokenPrivilegeDidExpire\");\n                //     $(\"#verification-dialog-3\").modal(\"show\");\n                //     leaveLive();\n                //     //进行重新申请 Token 操作后\n                //     //client.renewToken(token);\n                // });\n                //initStats();\n            },\n            //活动星空开始直播\n             skyStartLive(){\n                 postSkyStartLive(this.eventId,this.lhid).then(res => {\n                    console.log(res)\n\n                    if(res.data.rspCode == 1){\n                        console.log(res,'开始直播')\n                    }\n                })\n            },\n      \n            //声网结束直播\n            async leaveLive(){\n                if (this.localTracks.audioTrack) {\n                    this.localTracks.audioTrack.stop();\n                    this.localTracks.audioTrack.close();\n                    this.localTracks.audioTrack = undefined;\n                }\n\n                if (this.localTracks.videoTrack) {\n                    this.localTracks.videoTrack.stop();\n                    this.localTracks.videoTrack.close();\n                    this.localTracks.videoTrack = undefined;\n                }\n\n                await this.client.unpublish();\n                // leave the channel\n                await this.client.leave();\n            },\n            //初始化直播 分辨率   \n            initVideoProfiles() {\n                this.curVideoProfile = this.videoProfiles[3];\n            },\n            //活动星空结束直播\n            endSkyLive(){\n                this.leaveLive()\n                postSkyEndLive(this.eventId,this.lhid).then(res => {\n                    console.log(res)\n                    if(res.data.rspCode == 1){\n                        console.log(res,'结束直播')\n                    }\n                })\n            }\n        },\n        created(){\n            this.eventId = this.$route.params.pathMatch\n\n            var browerSupport = AgoraRTC.checkSystemRequirements();\n            if (browerSupport) {\n                this.client = AgoraRTC.createClient({ mode: \"live\", codec: \"h264\" });\n                //screenShareClient = AgoraRTC.createClient({ mode: \"live\", codec: \"vp8\" });\n            } else {\n                alert(\"The Brower is not support live!\");\n                return;\n            }\n            this.initVideoProfiles();\n        },\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    .live{\n        padding: 120px 0 150px;\n        box-sizing: border-box;\n        background: #0F5F54;\n    }\n    .player-box{\n        width: 90%;\n        height: 600px;\n        margin: 0 auto;\n        position: relative;\n        .player-btn{\n            display: inline-block;\n            position: absolute;\n            margin: auto;\n            left: 50%;\n            transform: translate3d(-50%,-50%,0);\n            cursor: pointer;\n            top: 50%;\n            .video{\n                width: 115px;\n                margin:0 auto 40px;\n                display: block;\n            }\n            .text{\n                background: #027AFF;\n                border-radius: 6px;\n                border: 1px solid #979797;\n                color: #fff;\n                line-height: 42px;\n                display: inline-block;\n                padding: 0 30px;\n            }\n        }\n        .endBtn{\n            display: inline-block;\n            position: absolute;\n            left: 50%;\n            transform: translateX(-50%);\n            bottom: 18px;\n            padding: 0 30px;\n            color: #fff;\n            cursor: pointer;\n            line-height: 44px;\n            background: #FF5755;\n            border-radius: 6px;\n            border: 1px solid #979797;\n        }\n    }\n</style>"],"sourceRoot":"src/views/live"}]}